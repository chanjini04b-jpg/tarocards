<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <!-- ================== ê¸°ë³¸ ë©”íƒ€ íƒœê·¸ (SEO) ================== -->
    <meta name="title" content="YES/NO íƒ€ë¡œ ë””ë²„ê·¸ ë„êµ¬">
    <meta name="description" content="YES/NO íƒ€ë¡œ ê¸°ëŠ¥ì„ í…ŒìŠ¤íŠ¸í•˜ê³  ë””ë²„ê¹…í•˜ëŠ” ë„êµ¬ í˜ì´ì§€">
    <meta name="keywords" content="íƒ€ë¡œ, YES/NO, ë””ë²„ê·¸, í…ŒìŠ¤íŠ¸, íƒ€ë¡œì¹´ë“œ, ë„êµ¬">
    <meta name="author" content="Historical Tarot Team">
    <meta name="robots" content="noindex, nofollow">

    <!-- ================== Open Graph ë©”íƒ€ íƒœê·¸ ================== -->
    <meta property="og:title" content="YES/NO íƒ€ë¡œ ë””ë²„ê·¸ ë„êµ¬">
    <meta property="og:description" content="YES/NO íƒ€ë¡œ ê¸°ëŠ¥ì„ í…ŒìŠ¤íŠ¸í•˜ê³  ë””ë²„ê¹…í•˜ëŠ” ë„êµ¬ í˜ì´ì§€">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://tarocards.netlify.app/debug-tool.html">
    <meta property="og:image" content="https://tarocards.netlify.app/images/og-image.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="YES/NO íƒ€ë¡œ ë””ë²„ê·¸ ëŒ€í‘œ ì´ë¯¸ì§€">
    <meta property="og:site_name" content="Historical Tarot">
    <meta property="og:locale" content="ko_KR">

    <!-- ================== Twitter ì¹´ë“œ ë©”íƒ€ íƒœê·¸ ================== -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="YES/NO íƒ€ë¡œ ë””ë²„ê·¸ ë„êµ¬">
    <meta name="twitter:description" content="YES/NO íƒ€ë¡œ ê¸°ëŠ¥ì„ í…ŒìŠ¤íŠ¸í•˜ê³  ë””ë²„ê¹…í•˜ëŠ” ë„êµ¬ í˜ì´ì§€">
    <meta name="twitter:image" content="https://tarocards.netlify.app/images/og-image.jpg">
    <meta name="twitter:image:alt" content="YES/NO íƒ€ë¡œ ë””ë²„ê·¸ ëŒ€í‘œ ì´ë¯¸ì§€">
    <meta name="twitter:site" content="@historicaltarot">
    <meta name="twitter:creator" content="@historicaltarot">

    <!-- ================== SEO ë° ì‚¬ìš©ì ê²½í—˜ ë³´ì™„ íƒœê·¸ ================== -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="language" content="ko">
    <meta name="distribution" content="global">
    <meta name="rating" content="general">
    <meta name="format-detection" content="telephone=no">
    <link rel="canonical" href="https://tarocards.netlify.app/debug-tool.html">

    <!-- ================== ì›¹ì•± ë° ë¸Œë¼ìš°ì € ìµœì í™” ================== -->
    <meta name="theme-color" content="#ffffff">
    <meta name="application-name" content="Historical Tarot">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="Historical Tarot">

    <!-- ================== ì•„ì´ì½˜ ë° ë¦¬ì†ŒìŠ¤ ë§í¬ ================== -->
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <link rel="manifest" href="/site.webmanifest">
    <title>YES/NO íƒ€ë¡œ ë””ë²„ê·¸ ë„êµ¬</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background: #1a1a2e;
            color: white;
        }
        
        .debug-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .debug-panel {
            background: #16213e;
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #0f3460;
        }
        
        .full-width {
            grid-column: 1 / -1;
        }
        
        h1, h2 {
            color: #f0d084;
            margin-top: 0;
        }
        
        .question-input {
            width: 100%;
            min-height: 80px;
            padding: 15px;
            border: 2px solid #f0d084;
            border-radius: 10px;
            background: rgba(255, 215, 0, 0.1);
            color: white;
            font-size: 16px;
            resize: vertical;
            margin-bottom: 15px;
        }
        
        .btn {
            background: linear-gradient(135deg, #f0d084, #d4af37);
            color: #1a1a2e;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            margin: 5px;
            transition: all 0.3s ease;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(240, 208, 132, 0.3);
        }
        
        .btn-small {
            padding: 8px 15px;
            font-size: 14px;
        }
        
        .error-log {
            background: #2d1b1b;
            border: 1px solid #d32f2f;
            color: #ff6b6b;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 14px;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .success-log {
            background: #1b2d1b;
            border: 1px solid #2e7d32;
            color: #66bb6a;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 14px;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .info-log {
            background: #1b1b2d;
            border: 1px solid #1976d2;
            color: #64b5f6;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 14px;
            max-height: 200px;
            overflow-y: auto;
            white-space: pre-wrap;
        }
        
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .status-ok { background: #4caf50; }
        .status-error { background: #f44336; }
        .status-warning { background: #ff9800; }
        
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }
        
        .result-display {
            background: rgba(255, 215, 0, 0.05);
            border: 2px dashed #f0d084;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            min-height: 100px;
        }
    </style>
</head>
<body>
    <h1>ğŸ” YES/NO íƒ€ë¡œ ë””ë²„ê·¸ ë„êµ¬</h1>
    
    <div class="debug-container">
        <!-- í…ŒìŠ¤íŠ¸ íŒ¨ë„ -->
        <div class="debug-panel">
            <h2>ğŸ¯ í…ŒìŠ¤íŠ¸ ì‹¤í–‰</h2>
            
            <textarea id="testQuestion" class="question-input" placeholder="í…ŒìŠ¤íŠ¸í•  ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”...">ì˜¤ëŠ˜ í•˜ë£¨ê°€ ì¢‹ì„ê¹Œìš”?</textarea>
            
            <div class="test-grid">
                <button class="btn btn-small" onclick="runFullTest()">ì „ì²´ í…ŒìŠ¤íŠ¸</button>
                <button class="btn btn-small" onclick="testInstanceCreation()">ì¸ìŠ¤í„´ìŠ¤ ìƒì„±</button>
                <button class="btn btn-small" onclick="testCardData()">ì¹´ë“œ ë°ì´í„°</button>
                <button class="btn btn-small" onclick="testDrawFunction()">ì¹´ë“œ ë½‘ê¸°</button>
                <button class="btn btn-small" onclick="testDisplayResult()">ê²°ê³¼ í‘œì‹œ</button>
                <button class="btn btn-small" onclick="clearLogs()">ë¡œê·¸ ì§€ìš°ê¸°</button>
            </div>
        </div>
        
        <!-- ìƒíƒœ íŒ¨ë„ -->
        <div class="debug-panel">
            <h2>ğŸ“Š ìƒíƒœ ì²´í¬</h2>
            
            <div id="statusDisplay">
                <p><span class="status-indicator status-warning"></span> ìƒíƒœ í™•ì¸ ì¤‘...</p>
            </div>
            
            <button class="btn btn-small" onclick="checkAllStatus()">ìƒíƒœ ìƒˆë¡œê³ ì¹¨</button>
        </div>
        
        <!-- ë¡œê·¸ íŒ¨ë„ -->
        <div class="debug-panel full-width">
            <h2>ğŸ“ ì‹¤ì‹œê°„ ë¡œê·¸</h2>
            <div id="debugLogs">
                <!-- ë¡œê·¸ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
            </div>
        </div>
        
        <!-- ê²°ê³¼ íŒ¨ë„ -->
        <div class="debug-panel full-width">
            <h2>ğŸ´ í…ŒìŠ¤íŠ¸ ê²°ê³¼</h2>
            <div id="testResults" class="result-display">
                í…ŒìŠ¤íŠ¸ ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤...
            </div>
        </div>
    </div>

    <script>
        // ë””ë²„ê·¸ ë¡œê·¸ ì‹œìŠ¤í…œ
        class DebugLogger {
            constructor() {
                this.logContainer = document.getElementById('debugLogs');
                this.logs = [];
                this.maxLogs = 50;
            }
            
            log(message, type = 'info') {
                const timestamp = new Date().toLocaleTimeString();
                const logEntry = {
                    timestamp,
                    message,
                    type,
                    id: Date.now()
                };
                
                this.logs.unshift(logEntry);
                if (this.logs.length > this.maxLogs) {
                    this.logs.pop();
                }
                
                this.render();
                console.log(`[${type.toUpperCase()}] ${message}`);
            }
            
            error(message) { this.log(message, 'error'); }
            success(message) { this.log(message, 'success'); }
            info(message) { this.log(message, 'info'); }
            
            clear() {
                this.logs = [];
                this.render();
            }
            
            render() {
                const logsByType = this.logs.reduce((acc, log) => {
                    if (!acc[log.type]) acc[log.type] = [];
                    acc[log.type].push(log);
                    return acc;
                }, {});
                
                let html = '';
                
                if (logsByType.error && logsByType.error.length > 0) {
                    html += '<div class="error-log">';
                    html += '<strong>ğŸš¨ ì˜¤ë¥˜:</strong><br>';
                    logsByType.error.forEach(log => {
                        html += `[${log.timestamp}] ${log.message}<br>`;
                    });
                    html += '</div>';
                }
                
                if (logsByType.success && logsByType.success.length > 0) {
                    html += '<div class="success-log">';
                    html += '<strong>âœ… ì„±ê³µ:</strong><br>';
                    logsByType.success.forEach(log => {
                        html += `[${log.timestamp}] ${log.message}<br>`;
                    });
                    html += '</div>';
                }
                
                if (logsByType.info && logsByType.info.length > 0) {
                    html += '<div class="info-log">';
                    html += '<strong>â„¹ï¸ ì •ë³´:</strong><br>';
                    logsByType.info.forEach(log => {
                        html += `[${log.timestamp}] ${log.message}<br>`;
                    });
                    html += '</div>';
                }
                
                this.logContainer.innerHTML = html || '<p>ë¡œê·¸ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
            }
        }
        
        // ì „ì—­ ë””ë²„ê±° ì¸ìŠ¤í„´ìŠ¤
        const debugLogger = new DebugLogger();
        
        // ìƒíƒœ ì²´í¬ í•¨ìˆ˜ë“¤
        function checkAllStatus() {
            debugLogger.info('ì „ì²´ ìƒíƒœ ì²´í¬ ì‹œì‘');
            
            const statusDisplay = document.getElementById('statusDisplay');
            let statusHtml = '';
            
            // ìŠ¤í¬ë¦½íŠ¸ ë¡œë”© ìƒíƒœ í™•ì¸
            const yesnoScript = Array.from(document.scripts).find(script => 
                script.src.includes('yesno-tarot.js') || 
                (window.parent && Array.from(window.parent.document.scripts).find(s => s.src.includes('yesno-tarot.js')))
            );
            
            if (yesnoScript || (window.parent && window.parent.YesNoTarot)) {
                statusHtml += '<p><span class="status-indicator status-ok"></span> yesno-tarot.js ìŠ¤í¬ë¦½íŠ¸: ë¡œë”©ë¨</p>';
                debugLogger.success('yesno-tarot.js ìŠ¤í¬ë¦½íŠ¸ í™•ì¸');
            } else {
                statusHtml += '<p><span class="status-indicator status-error"></span> yesno-tarot.js ìŠ¤í¬ë¦½íŠ¸: ë¡œë”© ì•ˆë¨</p>';
                debugLogger.error('yesno-tarot.js ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ');
            }
            
            // YesNoTarot í´ë˜ìŠ¤ ì¡´ì¬ í™•ì¸ (ë¶€ëª¨ ì°½ì—ì„œë„ í™•ì¸)
            const YesNoTarotClass = window.YesNoTarot || (window.parent && window.parent.YesNoTarot);
            if (YesNoTarotClass) {
                statusHtml += '<p><span class="status-indicator status-ok"></span> YesNoTarot í´ë˜ìŠ¤: ì¡´ì¬</p>';
                debugLogger.success('YesNoTarot í´ë˜ìŠ¤ ë°œê²¬');
                // ë¶€ëª¨ ì°½ì˜ í´ë˜ìŠ¤ë¥¼ í˜„ì¬ ì°½ì— ë³µì‚¬
                if (!window.YesNoTarot && window.parent && window.parent.YesNoTarot) {
                    window.YesNoTarot = window.parent.YesNoTarot;
                    debugLogger.info('ë¶€ëª¨ ì°½ì—ì„œ YesNoTarot í´ë˜ìŠ¤ ë³µì‚¬');
                }
            } else {
                statusHtml += '<p><span class="status-indicator status-error"></span> YesNoTarot í´ë˜ìŠ¤: ì—†ìŒ</p>';
                debugLogger.error('YesNoTarot í´ë˜ìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ');
            }
            
            // ì¸ìŠ¤í„´ìŠ¤ ì¡´ì¬ í™•ì¸ (ë¶€ëª¨ ì°½ì—ì„œë„ í™•ì¸)
            const yesNoTarotInstance = window.yesNoTarot || (window.parent && window.parent.yesNoTarot);
            if (yesNoTarotInstance) {
                statusHtml += '<p><span class="status-indicator status-ok"></span> yesNoTarot ì¸ìŠ¤í„´ìŠ¤: ì¡´ì¬</p>';
                debugLogger.success('yesNoTarot ì¸ìŠ¤í„´ìŠ¤ ë°œê²¬');
                
                // ë¶€ëª¨ ì°½ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ í˜„ì¬ ì°½ì— ì°¸ì¡°
                if (!window.yesNoTarot && window.parent && window.parent.yesNoTarot) {
                    window.yesNoTarot = window.parent.yesNoTarot;
                    debugLogger.info('ë¶€ëª¨ ì°½ì—ì„œ yesNoTarot ì¸ìŠ¤í„´ìŠ¤ ì°¸ì¡°');
                }
                
                // ì¹´ë“œ ë°ì´í„° í™•ì¸
                if (yesNoTarotInstance.yesNoCards) {
                    const cardData = yesNoTarotInstance.yesNoCards;
                    statusHtml += `<p><span class="status-indicator status-ok"></span> ì¹´ë“œ ë°ì´í„°: YES(${cardData.YES?.length || 0}), NO(${cardData.NO?.length || 0}), MAYBE(${cardData.MAYBE?.length || 0})</p>`;
                    debugLogger.success(`ì¹´ë“œ ë°ì´í„° í™•ì¸ ì™„ë£Œ: YES=${cardData.YES?.length}, NO=${cardData.NO?.length}, MAYBE=${cardData.MAYBE?.length}`);
                } else {
                    statusHtml += '<p><span class="status-indicator status-error"></span> ì¹´ë“œ ë°ì´í„°: ì—†ìŒ</p>';
                    debugLogger.error('ì¹´ë“œ ë°ì´í„°ê°€ ì—†ìŒ');
                }
            } else {
                statusHtml += '<p><span class="status-indicator status-error"></span> yesNoTarot ì¸ìŠ¤í„´ìŠ¤: ì—†ìŒ</p>';
                debugLogger.error('yesNoTarot ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ');
            }
            
            // DOM ìš”ì†Œ í™•ì¸
            const yesnoQuestion = document.getElementById('yesnoQuestion');
            const yesnoDrawBtn = document.getElementById('yesnoDrawBtn');
            const yesnoResult = document.getElementById('yesnoResult');
            
            statusHtml += `<p><span class="status-indicator ${yesnoQuestion ? 'status-ok' : 'status-error'}"></span> yesnoQuestion ìš”ì†Œ: ${yesnoQuestion ? 'ì¡´ì¬' : 'ì—†ìŒ'}</p>`;
            statusHtml += `<p><span class="status-indicator ${yesnoDrawBtn ? 'status-ok' : 'status-error'}"></span> yesnoDrawBtn ìš”ì†Œ: ${yesnoDrawBtn ? 'ì¡´ì¬' : 'ì—†ìŒ'}</p>`;
            statusHtml += `<p><span class="status-indicator ${yesnoResult ? 'status-ok' : 'status-error'}"></span> yesnoResult ìš”ì†Œ: ${yesnoResult ? 'ì¡´ì¬' : 'ì—†ìŒ'}</p>`;
            
            // íƒ€ë¡œ ì¹´ë“œ ë§¤ë‹ˆì € í™•ì¸
            if (window.tarotCardManager) {
                statusHtml += '<p><span class="status-indicator status-ok"></span> tarotCardManager: ì¡´ì¬</p>';
                debugLogger.success('tarotCardManager ë°œê²¬');
            } else {
                statusHtml += '<p><span class="status-indicator status-warning"></span> tarotCardManager: ì—†ìŒ (í´ë°± ë°ì´í„° ì‚¬ìš©)</p>';
                debugLogger.info('tarotCardManager ì—†ìŒ, í´ë°± ë°ì´í„° ì‚¬ìš©');
            }
            
            statusDisplay.innerHTML = statusHtml;
            debugLogger.success('ìƒíƒœ ì²´í¬ ì™„ë£Œ');
        }
        
        // í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ë“¤
        function testInstanceCreation() {
            debugLogger.info('ì¸ìŠ¤í„´ìŠ¤ ìƒì„± í…ŒìŠ¤íŠ¸ ì‹œì‘');
            
            try {
                // í´ë˜ìŠ¤ ì°¾ê¸° (í˜„ì¬ ì°½ ë˜ëŠ” ë¶€ëª¨ ì°½ì—ì„œ)
                const YesNoTarotClass = window.YesNoTarot || (window.parent && window.parent.YesNoTarot);
                
                if (!YesNoTarotClass) {
                    throw new Error('YesNoTarot í´ë˜ìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë©”ì¸ í˜ì´ì§€ë¥¼ ë¨¼ì € ë¡œë“œí•´ì£¼ì„¸ìš”.');
                }
                
                debugLogger.success('YesNoTarot í´ë˜ìŠ¤ ë°œê²¬');
                
                const testInstance = new YesNoTarotClass();
                debugLogger.success('YesNoTarot ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ì„±ê³µ');
                
                // ì´ˆê¸°í™” ëŒ€ê¸°
                setTimeout(() => {
                    if (testInstance.yesNoCards) {
                        debugLogger.success('ì¹´ë“œ ë°ì´í„° ì´ˆê¸°í™” ì„±ê³µ');
                        debugLogger.info(`ì¹´ë“œ ë°ì´í„°: YES=${testInstance.yesNoCards.YES?.length}, NO=${testInstance.yesNoCards.NO?.length}, MAYBE=${testInstance.yesNoCards.MAYBE?.length}`);
                    } else {
                        debugLogger.error('ì¹´ë“œ ë°ì´í„° ì´ˆê¸°í™” ì‹¤íŒ¨');
                    }
                }, 1000);
                
            } catch (error) {
                debugLogger.error(`ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ì‹¤íŒ¨: ${error.message}`);
            }
        }
        
        function testCardData() {
            debugLogger.info('ì¹´ë“œ ë°ì´í„° í…ŒìŠ¤íŠ¸ ì‹œì‘');
            
            if (!window.yesNoTarot) {
                debugLogger.error('yesNoTarot ì¸ìŠ¤í„´ìŠ¤ê°€ ì—†ìŠµë‹ˆë‹¤');
                return;
            }
            
            const cards = window.yesNoTarot.yesNoCards;
            if (!cards) {
                debugLogger.error('ì¹´ë“œ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤');
                return;
            }
            
            debugLogger.info(`YES ì¹´ë“œ: ${cards.YES?.length || 0}ê°œ`);
            debugLogger.info(`NO ì¹´ë“œ: ${cards.NO?.length || 0}ê°œ`);
            debugLogger.info(`MAYBE ì¹´ë“œ: ${cards.MAYBE?.length || 0}ê°œ`);
            
            // ì²« ë²ˆì§¸ ì¹´ë“œ ìƒ˜í”Œ ì¶œë ¥
            if (cards.YES && cards.YES[0]) {
                debugLogger.info(`YES ì¹´ë“œ ìƒ˜í”Œ: ${cards.YES[0].name} (${cards.YES[0].korean})`);
            }
            
            debugLogger.success('ì¹´ë“œ ë°ì´í„° í…ŒìŠ¤íŠ¸ ì™„ë£Œ');
        }
        
        function testDrawFunction() {
            debugLogger.info('ì¹´ë“œ ë½‘ê¸° í•¨ìˆ˜ í…ŒìŠ¤íŠ¸ ì‹œì‘');
            
            const question = document.getElementById('testQuestion').value.trim();
            if (!question) {
                debugLogger.error('ì§ˆë¬¸ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤');
                return;
            }
            
            try {
                // ì¸ìŠ¤í„´ìŠ¤ í™•ì¸ (ë¶€ëª¨ ì°½ ë˜ëŠ” í˜„ì¬ ì°½)
                const yesNoTarotInstance = window.yesNoTarot || (window.parent && window.parent.yesNoTarot);
                if (!yesNoTarotInstance) {
                    throw new Error('yesNoTarot ì¸ìŠ¤í„´ìŠ¤ê°€ ì—†ìŠµë‹ˆë‹¤. ë©”ì¸ í˜ì´ì§€ë¥¼ ë¨¼ì € ë¡œë“œí•´ì£¼ì„¸ìš”.');
                }
                
                debugLogger.info(`í…ŒìŠ¤íŠ¸ ì§ˆë¬¸: "${question}"`);
                
                // ë¶€ëª¨ ì°½ì˜ ìš”ì†Œì— ì§ˆë¬¸ ì„¤ì • (ìˆë‹¤ë©´)
                if (window.parent && window.parent.document) {
                    const parentQuestionInput = window.parent.document.getElementById('yesnoQuestion');
                    if (parentQuestionInput) {
                        parentQuestionInput.value = question;
                        debugLogger.success('ë¶€ëª¨ ì°½ì˜ ì§ˆë¬¸ ì…ë ¥ í•„ë“œì— ì„¤ì • ì™„ë£Œ');
                    } else {
                        debugLogger.info('ë¶€ëª¨ ì°½ì—ì„œ ì§ˆë¬¸ ì…ë ¥ í•„ë“œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ (ì •ìƒ - ë””ë²„ê·¸ ëª¨ë“œ)');
                    }
                }
                
                // ë‹µë³€ íƒ€ì… ê²°ì • í…ŒìŠ¤íŠ¸
                yesNoTarotInstance.currentQuestion = question;
                const answerType = yesNoTarotInstance.determineAnswerType(question);
                debugLogger.info(`ê²°ì •ëœ ë‹µë³€ íƒ€ì…: ${answerType}`);
                
                // ì¹´ë“œ ë°ì´í„° í™•ì¸
                if (!yesNoTarotInstance.yesNoCards) {
                    throw new Error('ì¹´ë“œ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤');
                }
                
                const cardPool = yesNoTarotInstance.yesNoCards[answerType];
                if (!cardPool || cardPool.length === 0) {
                    throw new Error(`${answerType} ì¹´ë“œ í’€ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤`);
                }
                
                const randomCard = cardPool[Math.floor(Math.random() * cardPool.length)];
                debugLogger.success(`ì„ íƒëœ ì¹´ë“œ: ${randomCard.name} (${randomCard.korean})`);
                
                // ë””ë²„ê·¸ ë„êµ¬ì˜ ê²°ê³¼ ì˜ì—­ì— í‘œì‹œ
                displayDebugResult(randomCard, answerType, question);
                debugLogger.success('ê²°ê³¼ í‘œì‹œ ì™„ë£Œ');
                
            } catch (error) {
                debugLogger.error(`ì¹´ë“œ ë½‘ê¸° í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}`);
            }
        }
        
        // ë””ë²„ê·¸ ë„êµ¬ ì „ìš© ê²°ê³¼ í‘œì‹œ í•¨ìˆ˜
        function displayDebugResult(card, answerType, question) {
            const testResults = document.getElementById('testResults');
            
            const answerColors = {
                'YES': '#4CAF50',
                'NO': '#f44336', 
                'MAYBE': '#FF9800'
            };

            const answerEmojis = {
                'YES': 'âœ…',
                'NO': 'âŒ',
                'MAYBE': 'ğŸ¤”'
            };

            testResults.innerHTML = `
                <div style="text-align: center; margin-bottom: 20px;">
                    <h3 style="color: #f0d084;">ğŸ”® íƒ€ë¡œ ì¹´ë“œ ê²°ê³¼</h3>
                    <p style="background: rgba(255,255,255,0.1); padding: 10px; border-radius: 5px; margin: 10px 0;">
                        <strong>ì§ˆë¬¸:</strong> "${question}"
                    </p>
                </div>
                
                <div style="text-align: center; margin-bottom: 20px;">
                    <h2 style="color: ${answerColors[answerType]}; margin: 15px 0;">
                        ${answerEmojis[answerType]} ${answerType}
                    </h2>
                    <div style="background: ${answerColors[answerType]}; height: 6px; width: ${card.confidence}%; border-radius: 3px; margin: 10px auto; max-width: 200px;"></div>
                    <p style="color: #ccc;">í™•ì‹ ë„: ${card.confidence}%</p>
                </div>
                
                <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 10px; margin: 20px 0;">
                    <h4 style="color: #f0d084; margin-top: 0;">${card.name} (${card.korean})</h4>
                    <p><strong>ì˜ë¯¸:</strong> ${card.meaning}</p>
                    <p><strong>ì¡°ì–¸:</strong> ${card.advice}</p>
                    ${card.image_url ? `<img src="${card.image_url}" alt="${card.name}" style="max-width: 150px; max-height: 200px; object-fit: contain; display: block; margin: 15px auto; border-radius: 8px;" onerror="this.style.display='none'">` : ''}
                </div>
                
                <div style="text-align: center; margin-top: 20px;">
                    <button onclick="testDrawFunction()" style="background: linear-gradient(135deg, #f0d084, #d4af37); color: #1a1a2e; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer;">
                        ğŸ¯ ë‹¤ì‹œ ë½‘ê¸°
                    </button>
                </div>
            `;
        }
        
        function testDisplayResult() {
            debugLogger.info('ê²°ê³¼ í‘œì‹œ í…ŒìŠ¤íŠ¸ ì‹œì‘');
            
            const testCard = {
                name: 'Test Card',
                korean: 'í…ŒìŠ¤íŠ¸ ì¹´ë“œ',
                meaning: 'ì´ê²ƒì€ í…ŒìŠ¤íŠ¸ìš© ì¹´ë“œì…ë‹ˆë‹¤.',
                advice: 'í…ŒìŠ¤íŠ¸ê°€ ì„±ê³µì ìœ¼ë¡œ ì§„í–‰ë˜ê³  ìˆìŠµë‹ˆë‹¤.',
                confidence: 85,
                image_url: 'image2/The Sun.jpg'
            };
            
            const testResults = document.getElementById('testResults');
            testResults.innerHTML = `
                <div style="text-align: center; color: #4CAF50;">
                    <h3>âœ… YES</h3>
                    <h4>${testCard.name} (${testCard.korean})</h4>
                    <p><strong>ì˜ë¯¸:</strong> ${testCard.meaning}</p>
                    <p><strong>ì¡°ì–¸:</strong> ${testCard.advice}</p>
                    <p><strong>í™•ì‹ ë„:</strong> ${testCard.confidence}%</p>
                </div>
            `;
            
            debugLogger.success('í…ŒìŠ¤íŠ¸ ê²°ê³¼ í‘œì‹œ ì™„ë£Œ');
        }
        
        function runFullTest() {
            debugLogger.info('=== ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹œì‘ ===');
            
            checkAllStatus();
            
            setTimeout(() => {
                testInstanceCreation();
            }, 500);
            
            setTimeout(() => {
                testCardData();
            }, 1000);
            
            setTimeout(() => {
                testDrawFunction();
            }, 1500);
            
            setTimeout(() => {
                debugLogger.success('=== ì „ì²´ í…ŒìŠ¤íŠ¸ ì™„ë£Œ ===');
            }, 2000);
        }
        
        function clearLogs() {
            debugLogger.clear();
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            debugLogger.info('ë””ë²„ê·¸ ë„êµ¬ ë¡œë“œ ì™„ë£Œ');
            
            // ë©”ì¸ í˜ì´ì§€ì˜ ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ì‹œë„
            if (!window.YesNoTarot && window.parent !== window) {
                debugLogger.info('ë¶€ëª¨ ì°½ì—ì„œ YesNoTarot í´ë˜ìŠ¤ ì°¾ëŠ” ì¤‘...');
                
                if (window.parent.YesNoTarot) {
                    window.YesNoTarot = window.parent.YesNoTarot;
                    debugLogger.success('ë¶€ëª¨ ì°½ì—ì„œ YesNoTarot í´ë˜ìŠ¤ ê°€ì ¸ì˜´');
                }
                
                if (window.parent.yesNoTarot) {
                    window.yesNoTarot = window.parent.yesNoTarot;
                    debugLogger.success('ë¶€ëª¨ ì°½ì—ì„œ yesNoTarot ì¸ìŠ¤í„´ìŠ¤ ê°€ì ¸ì˜´');
                }
            }
            
            // yesno-tarot.js ì§ì ‘ ë¡œë“œ ì‹œë„
            if (!window.YesNoTarot) {
                debugLogger.info('YesNoTarot í´ë˜ìŠ¤ ë¡œë“œ ì‹œë„...');
                const script = document.createElement('script');
                script.src = 'js/yesno-tarot.js';
                script.onload = function() {
                    debugLogger.success('yesno-tarot.js ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ì™„ë£Œ');
                    setTimeout(checkAllStatus, 500);
                };
                script.onerror = function() {
                    debugLogger.error('yesno-tarot.js ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ì‹¤íŒ¨');
                };
                document.head.appendChild(script);
            }
            
            // 1ì´ˆ í›„ ìë™ìœ¼ë¡œ ìƒíƒœ ì²´í¬
            setTimeout(() => {
                checkAllStatus();
            }, 1000);
        });
        
        // ì—ëŸ¬ ìºì¹˜
        window.addEventListener('error', function(event) {
            debugLogger.error(`JavaScript ì—ëŸ¬: ${event.error?.message || event.message} (${event.filename}:${event.lineno})`);
        });
        
        // ì½˜ì†” ì—ëŸ¬ë„ ìºì¹˜
        const originalConsoleError = console.error;
        console.error = function(...args) {
            debugLogger.error(args.join(' '));
            originalConsoleError.apply(console, args);
        };
    </script>
</body>
</html>