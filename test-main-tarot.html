<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <!-- ================== ê¸°ë³¸ ë©”íƒ€ íƒœê·¸ (SEO) ================== -->
    <meta name="title" content="ë©”ì¸ íƒ€ë¡œ ë¦¬ë”© í…ŒìŠ¤íŠ¸">
    <meta name="description" content="ë©”ì¸ íƒ€ë¡œ ë¦¬ë”© ê¸°ëŠ¥ì„ í…ŒìŠ¤íŠ¸í•˜ëŠ” í˜ì´ì§€">
    <meta name="keywords" content="íƒ€ë¡œ, ë©”ì¸ ë¦¬ë”©, í…ŒìŠ¤íŠ¸, ì¹´ë“œ, ì‹œìŠ¤í…œ ì ê²€">
    <meta name="author" content="Historical Tarot Team">
    <meta name="robots" content="noindex, nofollow">

    <!-- ================== Open Graph ë©”íƒ€ íƒœê·¸ ================== -->
    <meta property="og:title" content="ë©”ì¸ íƒ€ë¡œ ë¦¬ë”© í…ŒìŠ¤íŠ¸">
    <meta property="og:description" content="ë©”ì¸ íƒ€ë¡œ ë¦¬ë”© ê¸°ëŠ¥ì„ í…ŒìŠ¤íŠ¸í•˜ëŠ” í˜ì´ì§€">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://tarocards.netlify.app/test-main-tarot.html">
    <meta property="og:image" content="https://tarocards.netlify.app/images/og-image.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="ë©”ì¸ íƒ€ë¡œ ë¦¬ë”© í…ŒìŠ¤íŠ¸ ëŒ€í‘œ ì´ë¯¸ì§€">
    <meta property="og:site_name" content="Historical Tarot">
    <meta property="og:locale" content="ko_KR">

    <!-- ================== Twitter ì¹´ë“œ ë©”íƒ€ íƒœê·¸ ================== -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="ë©”ì¸ íƒ€ë¡œ ë¦¬ë”© í…ŒìŠ¤íŠ¸">
    <meta name="twitter:description" content="ë©”ì¸ íƒ€ë¡œ ë¦¬ë”© ê¸°ëŠ¥ì„ í…ŒìŠ¤íŠ¸í•˜ëŠ” í˜ì´ì§€">
    <meta name="twitter:image" content="https://tarocards.netlify.app/images/og-image.jpg">
    <meta name="twitter:image:alt" content="ë©”ì¸ íƒ€ë¡œ ë¦¬ë”© í…ŒìŠ¤íŠ¸ ëŒ€í‘œ ì´ë¯¸ì§€">
    <meta name="twitter:site" content="@historicaltarot">
    <meta name="twitter:creator" content="@historicaltarot">

    <!-- ================== SEO ë° ì‚¬ìš©ì ê²½í—˜ ë³´ì™„ íƒœê·¸ ================== -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="language" content="ko">
    <meta name="distribution" content="global">
    <meta name="rating" content="general">
    <meta name="format-detection" content="telephone=no">
    <link rel="canonical" href="https://tarocards.netlify.app/test-main-tarot.html">

    <!-- ================== ì›¹ì•± ë° ë¸Œë¼ìš°ì € ìµœì í™” ================== -->
    <meta name="theme-color" content="#ffffff">
    <meta name="application-name" content="Historical Tarot">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="Historical Tarot">

    <!-- ================== ì•„ì´ì½˜ ë° ë¦¬ì†ŒìŠ¤ ë§í¬ ================== -->
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <link rel="manifest" href="/site.webmanifest">
    <title>ë©”ì¸ íƒ€ë¡œ ë¦¬ë”© í…ŒìŠ¤íŠ¸</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #1a1a2e;
            color: white;
        }
        .test-section {
            background: #16213e;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            border: 1px solid #0f3460;
        }
        .test-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            margin: 10px;
            font-size: 16px;
        }
        .test-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        .test-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .result {
            margin: 15px 0;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }
        .spread-option {
            display: inline-block;
            padding: 10px 20px;
            margin: 5px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid transparent;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .spread-option:hover {
            border-color: #667eea;
            background: rgba(102, 126, 234, 0.2);
        }
        .spread-option.active {
            border-color: #667eea;
            background: rgba(102, 126, 234, 0.3);
        }
        #debugOutput {
            background: #000;
            color: #0f0;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
        }
        .card-result {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid #667eea;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            text-align: center;
        }
        .card-image {
            max-width: 200px;
            height: auto;
            border-radius: 8px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>ğŸ”® ë©”ì¸ íƒ€ë¡œ ë¦¬ë”© í…ŒìŠ¤íŠ¸</h1>
    
    <div class="test-section">
        <h2>ë©”ì¸ íƒ€ë¡œ ë¦¬ë”© ì‹œìŠ¤í…œ ìƒíƒœ</h2>
        <button class="test-button" onclick="checkMainTarotStatus()">ìƒíƒœ í™•ì¸</button>
        <button class="test-button" onclick="testSimpleTarot()">SimpleTarot í…ŒìŠ¤íŠ¸</button>
        <button class="test-button" onclick="testTarotUI()">íƒ€ë¡œ UI í…ŒìŠ¤íŠ¸</button>
    </div>
    
    <div class="test-section">
        <h2>ìŠ¤í”„ë ˆë“œ ì„ íƒ í…ŒìŠ¤íŠ¸</h2>
        <div class="spread-option active" data-count="1" onclick="selectSpread(1, this)">
            ì› ì¹´ë“œ
        </div>
        <div class="spread-option" data-count="3" onclick="selectSpread(3, this)">
            ì‚¼ê° ìŠ¤í”„ë ˆë“œ
        </div>
        <div class="spread-option" data-count="5" onclick="selectSpread(5, this)">
            ë³„ìë¦¬ ìŠ¤í”„ë ˆë“œ
        </div>
        <div class="result">
            ì„ íƒëœ ìŠ¤í”„ë ˆë“œ: <span id="selectedSpread">ì› ì¹´ë“œ (1ì¥)</span>
        </div>
    </div>
    
    <div class="test-section">
        <h2>ì¹´ë“œ ë½‘ê¸° í…ŒìŠ¤íŠ¸</h2>
        <input type="text" id="testQuestion" placeholder="ë§ˆìŒì† ì§ˆë¬¸ì„ ì ì–´ì£¼ì„¸ìš”..." 
               style="width: 100%; padding: 10px; border-radius: 5px; border: 1px solid #667eea; background: rgba(255,255,255,0.1); color: white;">
        <br><br>
        <button class="test-button" id="testDrawBtn" onclick="drawTestCards()">ì¹´ë“œ ë½‘ê¸°</button>
        <div id="testResults"></div>
    </div>
    
    <div class="test-section">
        <h2>ë””ë²„ê·¸ ì¶œë ¥</h2>
        <div id="debugOutput">ì‹œìŠ¤í…œ ë¡œë”© ì¤‘...</div>
        <button class="test-button" onclick="clearDebug()">ì¶œë ¥ ì§€ìš°ê¸°</button>
    </div>

    <!-- í•„ìš”í•œ ìŠ¤í¬ë¦½íŠ¸ë“¤ ë¡œë“œ -->
    <script src="js/tarot-cards-data.js"></script>
    <script src="js/tarot-card-manager.js"></script>
    <script src="javascript/simple-tarot.js"></script>
    <script src="javascript/ui.js"></script>

    <script>
        let selectedSpreadCount = 1;
        
        function log(message) {
            const output = document.getElementById('debugOutput');
            const timestamp = new Date().toLocaleTimeString();
            output.textContent += `[${timestamp}] ${message}\n`;
            output.scrollTop = output.scrollHeight;
        }
        
        function clearDebug() {
            document.getElementById('debugOutput').textContent = '';
        }
        
        function checkMainTarotStatus() {
            log('=== ë©”ì¸ íƒ€ë¡œ ë¦¬ë”© ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸ ===');
            
            // SimpleTarot ì‹œìŠ¤í…œ í™•ì¸
            if (typeof SimpleTarotSystem !== 'undefined') {
                log('âœ… SimpleTarotSystem í´ë˜ìŠ¤ ë°œê²¬');
                if (typeof simpleTarot !== 'undefined') {
                    log('âœ… simpleTarot ì¸ìŠ¤í„´ìŠ¤ ë°œê²¬');
                    log('ì¹´ë“œ ìˆ˜: ' + simpleTarot.cards.length);
                    log('ì¤€ë¹„ ìƒíƒœ: ' + simpleTarot.isReady);
                } else {
                    log('âŒ simpleTarot ì¸ìŠ¤í„´ìŠ¤ ì—†ìŒ');
                }
            } else {
                log('âŒ SimpleTarotSystem í´ë˜ìŠ¤ ì—†ìŒ');
            }
            
            // ê¸°ì¡´ íƒ€ë¡œ ì‹œìŠ¤í…œ í™•ì¸
            if (typeof FULL_TAROT_CARDS !== 'undefined') {
                log('âœ… FULL_TAROT_CARDS ë°ì´í„° ë°œê²¬: ' + FULL_TAROT_CARDS.length + 'ê°œ');
            } else {
                log('âŒ FULL_TAROT_CARDS ë°ì´í„° ì—†ìŒ');
            }
            
            if (typeof TarotCardManager !== 'undefined') {
                log('âœ… TarotCardManager í´ë˜ìŠ¤ ë°œê²¬');
            } else {
                log('âŒ TarotCardManager í´ë˜ìŠ¤ ì—†ìŒ');
            }
            
            // HTML ìš”ì†Œ í™•ì¸
            const elements = {
                'userQuestion': document.getElementById('userQuestion'),
                'spreadOptions': document.querySelectorAll('.spread-option'),
                'drawCardsBtn': document.getElementById('drawCardsBtn'),
                'readingResults': document.getElementById('readingResults'),
                'drawnCards': document.getElementById('drawnCards')
            };
            
            log('\n--- HTML ìš”ì†Œ í™•ì¸ ---');
            for (const [name, element] of Object.entries(elements)) {
                if (element) {
                    if (element.length !== undefined) {
                        log(`âœ… ${name}: ${element.length}ê°œ ë°œê²¬`);
                    } else {
                        log(`âœ… ${name}: ë°œê²¬`);
                    }
                } else {
                    log(`âŒ ${name}: ì—†ìŒ`);
                }
            }
        }
        
        function testSimpleTarot() {
            log('\n=== SimpleTarot ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ ===');
            
            try {
                if (typeof simpleTarot === 'undefined') {
                    log('âŒ simpleTarot ì¸ìŠ¤í„´ìŠ¤ê°€ ì—†ìŠµë‹ˆë‹¤.');
                    return;
                }
                
                // ì› ì¹´ë“œ í…ŒìŠ¤íŠ¸
                log('ì› ì¹´ë“œ ë¦¬ë”© í…ŒìŠ¤íŠ¸...');
                const oneCard = simpleTarot.oneCardReading();
                log('âœ… ì› ì¹´ë“œ ì„±ê³µ: ' + oneCard.card.name_ko);
                
                // ì“°ë¦¬ ì¹´ë“œ í…ŒìŠ¤íŠ¸
                log('ì“°ë¦¬ ì¹´ë“œ ìŠ¤í”„ë ˆë“œ í…ŒìŠ¤íŠ¸...');
                const threeCards = simpleTarot.threeCardSpread();
                log('âœ… ì“°ë¦¬ ì¹´ë“œ ì„±ê³µ: ' + threeCards.length + 'ì¥');
                threeCards.forEach(card => {
                    log(`  ${card.position}: ${card.name_ko}`);
                });
                
                // ëœë¤ ì§ˆë¬¸ í…ŒìŠ¤íŠ¸
                log('ëœë¤ ì§ˆë¬¸ í…ŒìŠ¤íŠ¸...');
                const question = simpleTarot.getRandomQuestion();
                log('âœ… ëœë¤ ì§ˆë¬¸: ' + question);
                
            } catch (error) {
                log('âŒ SimpleTarot í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ' + error.message);
                console.error(error);
            }
        }
        
        function testTarotUI() {
            log('\n=== íƒ€ë¡œ UI í…ŒìŠ¤íŠ¸ ===');
            
            // ê¸°ë³¸ HTML ìš”ì†Œë“¤ì´ ë©”ì¸ í˜ì´ì§€ì—ì„œ ë¡œë“œë˜ëŠ”ì§€ í™•ì¸
            try {
                log('ë©”ì¸ í˜ì´ì§€ ìš”ì†Œ ì ‘ê·¼ í…ŒìŠ¤íŠ¸...');
                
                // iframeìœ¼ë¡œ ë©”ì¸ í˜ì´ì§€ ì ‘ê·¼ ì‹œë„
                const iframe = document.createElement('iframe');
                iframe.src = 'index.html';
                iframe.style.display = 'none';
                document.body.appendChild(iframe);
                
                iframe.onload = function() {
                    try {
                        const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
                        const drawBtn = iframeDoc.getElementById('drawCardsBtn');
                        if (drawBtn) {
                            log('âœ… ë©”ì¸ í˜ì´ì§€ì˜ drawCardsBtn ë°œê²¬');
                            log('ë²„íŠ¼ ìƒíƒœ: ' + (drawBtn.disabled ? 'ë¹„í™œì„±í™”' : 'í™œì„±í™”'));
                        } else {
                            log('âŒ ë©”ì¸ í˜ì´ì§€ì˜ drawCardsBtn ì—†ìŒ');
                        }
                        
                        const spreadOptions = iframeDoc.querySelectorAll('.spread-option');
                        log(`âœ… ìŠ¤í”„ë ˆë“œ ì˜µì…˜ ${spreadOptions.length}ê°œ ë°œê²¬`);
                        
                    } catch (e) {
                        log('âŒ ë©”ì¸ í˜ì´ì§€ ì ‘ê·¼ ì˜¤ë¥˜: ' + e.message);
                    }
                    
                    document.body.removeChild(iframe);
                };
                
            } catch (error) {
                log('âŒ UI í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ' + error.message);
            }
        }
        
        function selectSpread(count, element) {
            // ê¸°ì¡´ active í´ë˜ìŠ¤ ì œê±°
            document.querySelectorAll('.spread-option').forEach(opt => {
                opt.classList.remove('active');
            });
            
            // ìƒˆë¡œìš´ ìš”ì†Œì— active í´ë˜ìŠ¤ ì¶”ê°€
            element.classList.add('active');
            
            selectedSpreadCount = count;
            
            const spreadNames = {
                1: 'ì› ì¹´ë“œ',
                3: 'ì‚¼ê° ìŠ¤í”„ë ˆë“œ',
                5: 'ë³„ìë¦¬ ìŠ¤í”„ë ˆë“œ'
            };
            
            document.getElementById('selectedSpread').textContent = 
                `${spreadNames[count]} (${count}ì¥)`;
            
            log(`ìŠ¤í”„ë ˆë“œ ì„ íƒ: ${spreadNames[count]} (${count}ì¥)`);
        }
        
        function drawTestCards() {
            log('\n=== ì¹´ë“œ ë½‘ê¸° í…ŒìŠ¤íŠ¸ ì‹œì‘ ===');
            
            const question = document.getElementById('testQuestion').value || 'í…ŒìŠ¤íŠ¸ ì§ˆë¬¸';
            log('ì§ˆë¬¸: ' + question);
            log('ì„ íƒëœ ìŠ¤í”„ë ˆë“œ: ' + selectedSpreadCount + 'ì¥');
            
            try {
                if (typeof simpleTarot === 'undefined') {
                    log('âŒ simpleTarot ì‹œìŠ¤í…œì´ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
                    return;
                }
                
                let result;
                if (selectedSpreadCount === 1) {
                    result = simpleTarot.oneCardReading();
                    displayOneCardResult(result, question);
                } else if (selectedSpreadCount === 3) {
                    result = simpleTarot.threeCardSpread();
                    displayThreeCardResult(result, question);
                } else if (selectedSpreadCount === 5) {
                    // 5ì¥ ìŠ¤í”„ë ˆë“œëŠ” ì•„ì§ êµ¬í˜„ë˜ì§€ ì•ŠìŒ
                    log('âš ï¸ 5ì¥ ìŠ¤í”„ë ˆë“œëŠ” ì•„ì§ êµ¬í˜„ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
                    result = simpleTarot.threeCardSpread();
                    displayThreeCardResult(result, question);
                }
                
                log('âœ… ì¹´ë“œ ë½‘ê¸° ì™„ë£Œ');
                
            } catch (error) {
                log('âŒ ì¹´ë“œ ë½‘ê¸° ì‹¤íŒ¨: ' + error.message);
                console.error(error);
            }
        }
        
        function displayOneCardResult(result, question) {
            const resultsDiv = document.getElementById('testResults');
            const card = result.card;
            
            const html = `
                <div class="card-result">
                    <h3>ğŸ”® ${question}</h3>
                    <div class="card-info">
                        <h4>${card.name_ko} (${card.name_en})</h4>
                        <img src="../image2/${card.name_en}.jpg" alt="${card.name_ko}" class="card-image" 
                             onerror="this.src='../Cards-jpg/Cards-jpg/${String(card.rank || 0).padStart(2, '0')}-${card.name_en.replace(/\\s+/g, '')}.jpg'">
                        <p><strong>${card.reversed ? 'ì—­ë°©í–¥' : 'ì •ë°©í–¥'}:</strong> ${card.meaning}</p>
                        <p><em>${result.interpretation}</em></p>
                    </div>
                </div>
            `;
            
            resultsDiv.innerHTML = html;
            log(`ì¹´ë“œ í‘œì‹œ: ${card.name_ko} (${card.reversed ? 'ì—­ë°©í–¥' : 'ì •ë°©í–¥'})`);
        }
        
        function displayThreeCardResult(cards, question) {
            const resultsDiv = document.getElementById('testResults');
            
            let html = `
                <div class="card-result">
                    <h3>ğŸ”® ${question}</h3>
                    <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 20px;">
            `;
            
            cards.forEach(card => {
                html += `
                    <div style="text-align: center; flex: 1; min-width: 200px;">
                        <h4>${card.position}</h4>
                        <p><strong>${card.name_ko}</strong></p>
                        <img src="../image2/${card.name_en}.jpg" alt="${card.name_ko}" class="card-image" 
                             style="max-width: 150px;"
                             onerror="this.src='../Cards-jpg/Cards-jpg/${String(card.rank || 0).padStart(2, '0')}-${card.name_en.replace(/\\s+/g, '')}.jpg'">
                        <p><small>${card.reversed ? 'ì—­ë°©í–¥' : 'ì •ë°©í–¥'}: ${card.meaning}</small></p>
                    </div>
                `;
            });
            
            html += `
                    </div>
                </div>
            `;
            
            resultsDiv.innerHTML = html;
            log(`3ì¥ ìŠ¤í”„ë ˆë“œ í‘œì‹œ ì™„ë£Œ`);
            cards.forEach(card => {
                log(`  ${card.position}: ${card.name_ko} (${card.reversed ? 'ì—­ë°©í–¥' : 'ì •ë°©í–¥'})`);
            });
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ í›„ ìë™ ìƒíƒœ í™•ì¸
        window.addEventListener('load', function() {
            log('í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ');
            setTimeout(() => {
                checkMainTarotStatus();
            }, 1000);
        });
    </script>
</body>
</html>