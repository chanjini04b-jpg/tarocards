<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <!-- ================== ê¸°ë³¸ ë©”íƒ€ íƒœê·¸ (SEO) ================== -->
    <meta name="title" content="íƒ€ë¡œ ì‹œìŠ¤í…œ ì¢…í•© í…ŒìŠ¤íŠ¸">
    <meta name="description" content="íƒ€ë¡œ ì‹œìŠ¤í…œì˜ ëª¨ë“  ê¸°ëŠ¥ì„ ì¢…í•©ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•˜ëŠ” í˜ì´ì§€">
    <meta name="keywords" content="íƒ€ë¡œ, ì¢…í•© í…ŒìŠ¤íŠ¸, ì‹œìŠ¤í…œ ì ê²€, ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸, íƒ€ë¡œì¹´ë“œ">
    <meta name="author" content="Historical Tarot Team">
    <meta name="robots" content="noindex, nofollow">

    <!-- ================== Open Graph ë©”íƒ€ íƒœê·¸ ================== -->
    <meta property="og:title" content="íƒ€ë¡œ ì‹œìŠ¤í…œ ì¢…í•© í…ŒìŠ¤íŠ¸">
    <meta property="og:description" content="íƒ€ë¡œ ì‹œìŠ¤í…œì˜ ëª¨ë“  ê¸°ëŠ¥ì„ ì¢…í•©ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•˜ëŠ” í˜ì´ì§€">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://tarocards.netlify.app/system-test.html">
    <meta property="og:image" content="https://tarocards.netlify.app/images/og-image.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="íƒ€ë¡œ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ ëŒ€í‘œ ì´ë¯¸ì§€">
    <meta property="og:site_name" content="Historical Tarot">
    <meta property="og:locale" content="ko_KR">

    <!-- ================== Twitter ì¹´ë“œ ë©”íƒ€ íƒœê·¸ ================== -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="íƒ€ë¡œ ì‹œìŠ¤í…œ ì¢…í•© í…ŒìŠ¤íŠ¸">
    <meta name="twitter:description" content="íƒ€ë¡œ ì‹œìŠ¤í…œì˜ ëª¨ë“  ê¸°ëŠ¥ì„ ì¢…í•©ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•˜ëŠ” í˜ì´ì§€">
    <meta name="twitter:image" content="https://tarocards.netlify.app/images/og-image.jpg">
    <meta name="twitter:image:alt" content="íƒ€ë¡œ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ ëŒ€í‘œ ì´ë¯¸ì§€">
    <meta name="twitter:site" content="@historicaltarot">
    <meta name="twitter:creator" content="@historicaltarot">

    <!-- ================== SEO ë° ì‚¬ìš©ì ê²½í—˜ ë³´ì™„ íƒœê·¸ ================== -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="language" content="ko">
    <meta name="distribution" content="global">
    <meta name="rating" content="general">
    <meta name="format-detection" content="telephone=no">
    <link rel="canonical" href="https://tarocards.netlify.app/system-test.html">

    <!-- ================== ì›¹ì•± ë° ë¸Œë¼ìš°ì € ìµœì í™” ================== -->
    <meta name="theme-color" content="#ffffff">
    <meta name="application-name" content="Historical Tarot">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="Historical Tarot">

    <!-- ================== ì•„ì´ì½˜ ë° ë¦¬ì†ŒìŠ¤ ë§í¬ ================== -->
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <link rel="manifest" href="/site.webmanifest">
    <title>íƒ€ë¡œ ì‹œìŠ¤í…œ ì¢…í•© í…ŒìŠ¤íŠ¸</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Noto Sans KR', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        h1 {
            text-align: center;
            color: #4a5568;
            margin-bottom: 30px;
            font-size: 2.5em;
        }
        
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            background: #f7fafc;
        }
        
        .test-section h2 {
            color: #2d3748;
            margin-bottom: 15px;
            font-size: 1.4em;
        }
        
        .test-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px;
            transition: all 0.2s;
            font-weight: 500;
        }
        
        .test-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        .test-results {
            margin-top: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            border-left: 4px solid #48bb78;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
            line-height: 1.5;
        }
        
        .test-results.error {
            border-left-color: #f56565;
            background: #fed7d7;
        }
        
        .success-text {
            color: #38a169;
        }
        
        .error-text {
            color: #e53e3e;
        }
        
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .status-success {
            background: #48bb78;
        }
        
        .status-error {
            background: #f56565;
        }
        
        .status-warning {
            background: #ed8936;
        }
        
        .card-demo {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .card-item {
            background: white;
            border-radius: 8px;
            padding: 12px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transition: transform 0.2s;
            cursor: pointer;
            border: 1px solid #e2e8f0;
        }
        
        .card-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }
        
        .card-image-placeholder {
            width: 60px;
            height: 90px;
            background: linear-gradient(135deg, #edf2f7 0%, #e2e8f0 100%);
            border-radius: 6px;
            margin: 0 auto 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            color: #718096;
            border: 1px solid #cbd5e0;
        }
        
        .progress-bar {
            width: 100%;
            height: 20px;
            background: #e2e8f0;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #48bb78 0%, #38a169 100%);
            transition: width 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: white;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”® íƒ€ë¡œ ì‹œìŠ¤í…œ ì¢…í•© í…ŒìŠ¤íŠ¸</h1>
        
        <!-- ì „ì²´ ì§„í–‰ ìƒí™© -->
        <div class="test-section">
            <h2>ğŸ“Š ì „ì²´ í…ŒìŠ¤íŠ¸ ì§„í–‰ ìƒí™©</h2>
            <div class="progress-bar">
                <div id="overall-progress" class="progress-fill" style="width: 0%;">0%</div>
            </div>
            <p id="overall-status">í…ŒìŠ¤íŠ¸ë¥¼ ì‹œì‘í•˜ë ¤ë©´ ì•„ë˜ ë²„íŠ¼ë“¤ì„ í´ë¦­í•˜ì„¸ìš”.</p>
        </div>
        
        <!-- 1. ê¸°ë³¸ ë°ì´í„° ë¡œë”© í…ŒìŠ¤íŠ¸ -->
        <div class="test-section">
            <h2>1. ğŸ“š ê¸°ë³¸ ë°ì´í„° ì‹œìŠ¤í…œ</h2>
            <button class="test-button" onclick="testDataLoading()">ë°ì´í„° ë¡œë”© í…ŒìŠ¤íŠ¸</button>
            <button class="test-button" onclick="testImagePaths()">ì´ë¯¸ì§€ ê²½ë¡œ í™•ì¸</button>
            <div id="data-results" class="test-results" style="display: none;"></div>
        </div>
        
        <!-- 2. íƒ€ë¡œ ë”•ì…”ë„ˆë¦¬ í…ŒìŠ¤íŠ¸ -->
        <div class="test-section">
            <h2>2. ğŸ“– íƒ€ë¡œ ë”•ì…”ë„ˆë¦¬ ì‹œìŠ¤í…œ</h2>
            <button class="test-button" onclick="testTarotDictionary()">ë”•ì…”ë„ˆë¦¬ ê¸°ëŠ¥</button>
            <button class="test-button" onclick="testCardFiltering()">í•„í„°ë§ & ê²€ìƒ‰</button>
            <button class="test-button" onclick="renderSampleCards()">ì¹´ë“œ ë Œë”ë§</button>
            <div id="dictionary-results" class="test-results" style="display: none;"></div>
            <div id="card-demo" class="card-demo"></div>
        </div>
        
        <!-- 3. ë°±ì—… ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ -->
        <div class="test-section">
            <h2>3. ğŸ’¾ ë°±ì—… ë°ì´í„° ì‹œìŠ¤í…œ</h2>
            <button class="test-button" onclick="testBackupSystem()">ë°±ì—… ì‹œìŠ¤í…œ</button>
            <button class="test-button" onclick="testBackupFallback()">Fallback í…ŒìŠ¤íŠ¸</button>
            <div id="backup-results" class="test-results" style="display: none;"></div>
        </div>
        
        <!-- 4. ê°„ë‹¨ íƒ€ë¡œ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ -->
        <div class="test-section">
            <h2>4. ğŸ´ ê°„ë‹¨ íƒ€ë¡œ ì‹œìŠ¤í…œ</h2>
            <button class="test-button" onclick="testSimpleTarot()">ì›ì¹´ë“œ ë¦¬ë”©</button>
            <button class="test-button" onclick="testThreeCardSpread()">ì“°ë¦¬ì¹´ë“œ ìŠ¤í”„ë ˆë“œ</button>
            <button class="test-button" onclick="testRandomFeatures()">ëœë¤ ê¸°ëŠ¥ë“¤</button>
            <div id="simple-results" class="test-results" style="display: none;"></div>
        </div>
        
        <!-- 5. UI ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ -->
        <div class="test-section">
            <h2>5. ğŸ¨ UI ì¸í„°ë™ì…˜ ì‹œìŠ¤í…œ</h2>
            <button class="test-button" onclick="testUIFunctions()">ê¸°ë³¸ UI í•¨ìˆ˜</button>
            <button class="test-button" onclick="testModalSystem()">ëª¨ë‹¬ ì‹œìŠ¤í…œ</button>
            <button class="test-button" onclick="testNotifications()">ì•Œë¦¼ ì‹œìŠ¤í…œ</button>
            <div id="ui-results" class="test-results" style="display: none;"></div>
        </div>
        
        <!-- 6. í†µí•© í…ŒìŠ¤íŠ¸ -->
        <div class="test-section">
            <h2>6. ğŸ”„ ì‹œìŠ¤í…œ í†µí•© í…ŒìŠ¤íŠ¸</h2>
            <button class="test-button" onclick="runFullIntegrationTest()">ì „ì²´ í†µí•© í…ŒìŠ¤íŠ¸</button>
            <button class="test-button" onclick="performanceTest()">ì„±ëŠ¥ í…ŒìŠ¤íŠ¸</button>
            <button class="test-button" onclick="runAllTests()">ëª¨ë“  í…ŒìŠ¤íŠ¸ ì‹¤í–‰</button>
            <div id="integration-results" class="test-results" style="display: none;"></div>
        </div>
    </div>

    <!-- í…ŒìŠ¤íŠ¸ìš© ëª¨ë‹¬ -->
    <div id="testModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 1000; align-items: center; justify-content: center;">
        <div style="background: white; padding: 30px; border-radius: 15px; max-width: 500px; width: 90%; text-align: center;">
            <h3 id="modalTitle">í…ŒìŠ¤íŠ¸ ëª¨ë‹¬</h3>
            <div id="modalContent" style="margin: 20px 0;">
                <div style="width: 120px; height: 180px; background: linear-gradient(135deg, #edf2f7 0%, #e2e8f0 100%); margin: 20px auto; border-radius: 10px; display: flex; align-items: center; justify-content: center; border: 2px solid #cbd5e0;">
                    ì¹´ë“œ ì´ë¯¸ì§€
                </div>
                <p id="modalText">ì´ê²ƒì€ í…ŒìŠ¤íŠ¸ ëª¨ë‹¬ì…ë‹ˆë‹¤.</p>
            </div>
            <button onclick="closeTestModal()" style="background: #e53e3e; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">ë‹«ê¸°</button>
        </div>
    </div>

    <!-- ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ -->
    <script src="js/tarot-cards-data.js"></script>
    <script src="js/tarot-dictionary.js"></script>
    <script src="javascript/backup-data.js"></script>
    <script src="javascript/simple-tarot.js"></script>
    <script src="javascript/ui.js"></script>

    <script>
        // ì „ì—­ í…ŒìŠ¤íŠ¸ ìƒíƒœ
        let testResults = {
            total: 0,
            passed: 0,
            failed: 0,
            details: []
        };

        // ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤
        function showResults(elementId, message, isError = false) {
            const element = document.getElementById(elementId);
            element.style.display = 'block';
            element.className = 'test-results ' + (isError ? 'error' : '');
            element.innerHTML = message;
        }

        function updateProgress() {
            const percentage = testResults.total > 0 ? Math.round((testResults.passed / testResults.total) * 100) : 0;
            const progressBar = document.getElementById('overall-progress');
            const statusElement = document.getElementById('overall-status');
            
            progressBar.style.width = percentage + '%';
            progressBar.textContent = percentage + '%';
            
            statusElement.textContent = `ì§„í–‰ ìƒí™©: ${testResults.passed}/${testResults.total} í…ŒìŠ¤íŠ¸ í†µê³¼ (${percentage}%)`;
            
            if (percentage < 70) {
                progressBar.style.background = 'linear-gradient(90deg, #f56565 0%, #e53e3e 100%)';
            } else if (percentage < 90) {
                progressBar.style.background = 'linear-gradient(90deg, #ed8936 0%, #dd6b20 100%)';
            } else {
                progressBar.style.background = 'linear-gradient(90deg, #48bb78 0%, #38a169 100%)';
            }
        }

        function addTestResult(name, passed, details = '') {
            testResults.total++;
            if (passed) {
                testResults.passed++;
            } else {
                testResults.failed++;
            }
            testResults.details.push({
                name: name,
                passed: passed,
                details: details
            });
            updateProgress();
        }

        // 1. ë°ì´í„° ë¡œë”© í…ŒìŠ¤íŠ¸
        function testDataLoading() {
            let results = '=== ê¸°ë³¸ ë°ì´í„° ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ ===\\n\\n';
            
            try {
                // FULL_TAROT_CARDS í™•ì¸
                if (typeof FULL_TAROT_CARDS !== 'undefined') {
                    results += `âœ… FULL_TAROT_CARDS ë¡œë“œ ì„±ê³µ: ${FULL_TAROT_CARDS.length}ê°œ ì¹´ë“œ\\n`;
                    addTestResult('FULL_TAROT_CARDS ë¡œë”©', true);
                    
                    // ë°ì´í„° êµ¬ì¡° ê²€ì¦
                    const sample = FULL_TAROT_CARDS[0];
                    const requiredFields = ['id', 'name_ko', 'name_en', 'arcana', 'meaning_up', 'meaning_rev', 'image'];
                    const missingFields = requiredFields.filter(field => !(field in sample));
                    
                    if (missingFields.length === 0) {
                        results += 'âœ… ì¹´ë“œ ë°ì´í„° êµ¬ì¡° ê²€ì¦ ì„±ê³µ\\n';
                        addTestResult('ì¹´ë“œ ë°ì´í„° êµ¬ì¡°', true);
                    } else {
                        results += `âŒ ëˆ„ë½ëœ í•„ë“œ: ${missingFields.join(', ')}\\n`;
                        addTestResult('ì¹´ë“œ ë°ì´í„° êµ¬ì¡°', false);
                    }
                    
                    // ì•„ë¥´ì¹´ë‚˜ ë¶„í¬ í™•ì¸
                    const majorCount = FULL_TAROT_CARDS.filter(card => card.arcana === 'Major').length;
                    const minorCount = FULL_TAROT_CARDS.filter(card => card.arcana === 'Minor').length;
                    
                    results += `ğŸ“Š ë©”ì´ì € ì•„ë¥´ì¹´ë‚˜: ${majorCount}ê°œ\\n`;
                    results += `ğŸ“Š ë§ˆì´ë„ˆ ì•„ë¥´ì¹´ë‚˜: ${minorCount}ê°œ\\n`;
                    
                    if (majorCount === 22) {
                        results += 'âœ… ë©”ì´ì € ì•„ë¥´ì¹´ë‚˜ ê°œìˆ˜ ì •í™•\\n';
                        addTestResult('ë©”ì´ì € ì•„ë¥´ì¹´ë‚˜ ê°œìˆ˜', true);
                    } else {
                        results += 'âŒ ë©”ì´ì € ì•„ë¥´ì¹´ë‚˜ ê°œìˆ˜ ì˜¤ë¥˜\\n';
                        addTestResult('ë©”ì´ì € ì•„ë¥´ì¹´ë‚˜ ê°œìˆ˜', false);
                    }
                    
                } else {
                    results += 'âŒ FULL_TAROT_CARDSë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤\\n';
                    addTestResult('FULL_TAROT_CARDS ë¡œë”©', false);
                }
                
                showResults('data-results', results);
                
            } catch (error) {
                results += `âŒ ì˜¤ë¥˜ ë°œìƒ: ${error.message}\\n`;
                showResults('data-results', results, true);
                addTestResult('ë°ì´í„° ë¡œë”©', false, error.message);
            }
        }

        function testImagePaths() {
            let results = '=== ì´ë¯¸ì§€ ê²½ë¡œ í…ŒìŠ¤íŠ¸ ===\\n\\n';
            
            try {
                if (typeof FULL_TAROT_CARDS !== 'undefined') {
                    // ì²˜ìŒ 5ê°œ ì¹´ë“œì˜ ì´ë¯¸ì§€ ê²½ë¡œ í™•ì¸
                    let validPaths = 0;
                    let totalChecked = Math.min(5, FULL_TAROT_CARDS.length);
                    
                    for (let i = 0; i < totalChecked; i++) {
                        const card = FULL_TAROT_CARDS[i];
                        const imagePath = card.image;
                        
                        if (imagePath && imagePath.startsWith('images/')) {
                            results += `âœ… ${card.name_ko}: ${imagePath}\\n`;
                            validPaths++;
                        } else {
                            results += `âŒ ${card.name_ko}: ì˜ëª»ëœ ê²½ë¡œ (${imagePath})\\n`;
                        }
                    }
                    
                    results += `\\nğŸ“Š ìœ íš¨í•œ ê²½ë¡œ: ${validPaths}/${totalChecked}\\n`;
                    
                    if (validPaths === totalChecked) {
                        addTestResult('ì´ë¯¸ì§€ ê²½ë¡œ í˜•ì‹', true);
                    } else {
                        addTestResult('ì´ë¯¸ì§€ ê²½ë¡œ í˜•ì‹', false);
                    }
                    
                } else {
                    results += 'âŒ ì¹´ë“œ ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤\\n';
                    addTestResult('ì´ë¯¸ì§€ ê²½ë¡œ í…ŒìŠ¤íŠ¸', false);
                }
                
                showResults('data-results', results);
                
            } catch (error) {
                results += `âŒ ì˜¤ë¥˜ ë°œìƒ: ${error.message}\\n`;
                showResults('data-results', results, true);
                addTestResult('ì´ë¯¸ì§€ ê²½ë¡œ í…ŒìŠ¤íŠ¸', false, error.message);
            }
        }

        // 2. íƒ€ë¡œ ë”•ì…”ë„ˆë¦¬ í…ŒìŠ¤íŠ¸
        function testTarotDictionary() {
            let results = '=== íƒ€ë¡œ ë”•ì…”ë„ˆë¦¬ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ ===\\n\\n';
            
            try {
                if (typeof TarotDictionary !== 'undefined') {
                    results += 'âœ… TarotDictionary í´ë˜ìŠ¤ ë¡œë“œ ì„±ê³µ\\n';
                    addTestResult('TarotDictionary í´ë˜ìŠ¤', true);
                    
                    const dict = new TarotDictionary();
                    results += 'âœ… ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ì„±ê³µ\\n';
                    addTestResult('TarotDictionary ì¸ìŠ¤í„´ìŠ¤', true);
                    
                    dict.loadCards();
                    results += `âœ… ì¹´ë“œ ë¡œë“œ ì™„ë£Œ: ${dict.cards.length}ê°œ\\n`;
                    
                    if (dict.cards.length > 0) {
                        addTestResult('ì¹´ë“œ ë¡œë”©', true);
                    } else {
                        addTestResult('ì¹´ë“œ ë¡œë”©', false);
                    }
                    
                    // ë©”ì„œë“œ í…ŒìŠ¤íŠ¸
                    const methods = ['filterCards', 'searchCards', 'getCardImagePath', 'renderCards'];
                    methods.forEach(method => {
                        if (typeof dict[method] === 'function') {
                            results += `âœ… ${method} ë©”ì„œë“œ ì‚¬ìš© ê°€ëŠ¥\\n`;
                            addTestResult(`${method} ë©”ì„œë“œ`, true);
                        } else {
                            results += `âŒ ${method} ë©”ì„œë“œ ì—†ìŒ\\n`;
                            addTestResult(`${method} ë©”ì„œë“œ`, false);
                        }
                    });
                    
                } else {
                    results += 'âŒ TarotDictionary í´ë˜ìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤\\n';
                    addTestResult('TarotDictionary í´ë˜ìŠ¤', false);
                }
                
                showResults('dictionary-results', results);
                
            } catch (error) {
                results += `âŒ ì˜¤ë¥˜ ë°œìƒ: ${error.message}\\n`;
                showResults('dictionary-results', results, true);
                addTestResult('íƒ€ë¡œ ë”•ì…”ë„ˆë¦¬', false, error.message);
            }
        }

        function testCardFiltering() {
            let results = '=== ì¹´ë“œ í•„í„°ë§ & ê²€ìƒ‰ í…ŒìŠ¤íŠ¸ ===\\n\\n';
            
            try {
                if (typeof TarotDictionary !== 'undefined') {
                    const dict = new TarotDictionary();
                    dict.loadCards();
                    
                    // í•„í„°ë§ í…ŒìŠ¤íŠ¸
                    dict.filterCards('all');
                    const allCount = dict.filteredCards.length;
                    results += `ğŸƒ ì „ì²´ ì¹´ë“œ: ${allCount}ê°œ\\n`;
                    
                    dict.filterCards('Major');
                    const majorCount = dict.filteredCards.length;
                    results += `ğŸ‘‘ ë©”ì´ì € ì•„ë¥´ì¹´ë‚˜: ${majorCount}ê°œ\\n`;
                    
                    dict.filterCards('Minor');
                    const minorCount = dict.filteredCards.length;
                    results += `âš”ï¸ ë§ˆì´ë„ˆ ì•„ë¥´ì¹´ë‚˜: ${minorCount}ê°œ\\n`;
                    
                    if (majorCount + minorCount === allCount) {
                        results += 'âœ… í•„í„°ë§ ë¡œì§ ì •í™•\\n';
                        addTestResult('ì¹´ë“œ í•„í„°ë§', true);
                    } else {
                        results += 'âŒ í•„í„°ë§ ë¡œì§ ì˜¤ë¥˜\\n';
                        addTestResult('ì¹´ë“œ í•„í„°ë§', false);
                    }
                    
                    // ê²€ìƒ‰ í…ŒìŠ¤íŠ¸
                    const searchTerms = ['ë°”ë³´', 'ì‚¬ë‘', 'fool', 'ë§ˆë²•'];
                    let searchPassed = 0;
                    
                    searchTerms.forEach(term => {
                        dict.searchCards(term);
                        results += `ğŸ” '${term}' ê²€ìƒ‰: ${dict.filteredCards.length}ê°œ ê²°ê³¼\\n`;
                        if (dict.filteredCards.length >= 0) searchPassed++;
                    });
                    
                    if (searchPassed === searchTerms.length) {
                        addTestResult('ì¹´ë“œ ê²€ìƒ‰', true);
                    } else {
                        addTestResult('ì¹´ë“œ ê²€ìƒ‰', false);
                    }
                    
                } else {
                    results += 'âŒ TarotDictionaryë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤\\n';
                    addTestResult('í•„í„°ë§ & ê²€ìƒ‰', false);
                }
                
                showResults('dictionary-results', results);
                
            } catch (error) {
                results += `âŒ ì˜¤ë¥˜ ë°œìƒ: ${error.message}\\n`;
                showResults('dictionary-results', results, true);
                addTestResult('í•„í„°ë§ & ê²€ìƒ‰', false, error.message);
            }
        }

        function renderSampleCards() {
            try {
                if (typeof TarotDictionary !== 'undefined' && typeof FULL_TAROT_CARDS !== 'undefined') {
                    const dict = new TarotDictionary();
                    dict.loadCards();
                    
                    // ì²˜ìŒ 6ê°œ ì¹´ë“œ ë Œë”ë§
                    const sampleCards = dict.cards.slice(0, 6);
                    displayCardDemo(sampleCards);
                    
                    showResults('dictionary-results', 'âœ… ìƒ˜í”Œ ì¹´ë“œê°€ ì•„ë˜ì— ë Œë”ë§ë˜ì—ˆìŠµë‹ˆë‹¤. ì¹´ë“œë¥¼ í´ë¦­í•´ë³´ì„¸ìš”!');
                    addTestResult('ì¹´ë“œ ë Œë”ë§', true);
                    
                } else {
                    showResults('dictionary-results', 'âŒ ì¹´ë“œ ë Œë”ë§ì— í•„ìš”í•œ ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤', true);
                    addTestResult('ì¹´ë“œ ë Œë”ë§', false);
                }
            } catch (error) {
                showResults('dictionary-results', `âŒ ë Œë”ë§ ì˜¤ë¥˜: ${error.message}`, true);
                addTestResult('ì¹´ë“œ ë Œë”ë§', false, error.message);
            }
        }

        function displayCardDemo(cards) {
            const demoContainer = document.getElementById('card-demo');
            demoContainer.innerHTML = '';
            
            cards.forEach(card => {
                const cardElement = document.createElement('div');
                cardElement.className = 'card-item';
                cardElement.innerHTML = `
                    <div class="card-image-placeholder">
                        ${card.name_ko}
                    </div>
                    <div style="font-weight: bold; font-size: 12px;">${card.name_ko}</div>
                    <div style="font-size: 10px; color: #666; margin-top: 4px;">${card.name_en}</div>
                `;
                cardElement.onclick = () => {
                    showTestModal(card);
                };
                demoContainer.appendChild(cardElement);
            });
        }

        // 3. ë°±ì—… ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸
        function testBackupSystem() {
            let results = '=== ë°±ì—… ë°ì´í„° ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ ===\\n\\n';
            
            try {
                if (typeof BackupDataLoader !== 'undefined') {
                    results += 'âœ… BackupDataLoader í´ë˜ìŠ¤ ë¡œë“œ ì„±ê³µ\\n';
                    addTestResult('BackupDataLoader í´ë˜ìŠ¤', true);
                    
                    const loader = new BackupDataLoader();
                    const cards = loader.loadBackupData();
                    
                    results += `âœ… ë°±ì—… ë°ì´í„° ë¡œë“œ ì„±ê³µ: ${cards.length}ê°œ ì¹´ë“œ\\n`;
                    
                    if (cards.length > 0) {
                        addTestResult('ë°±ì—… ë°ì´í„° ë¡œë“œ', true);
                        
                        // ë°±ì—… ë°ì´í„° ë©”ì„œë“œ í…ŒìŠ¤íŠ¸
                        const randomCard = loader.getRandomCard();
                        if (randomCard) {
                            results += `ğŸ² ëœë¤ ì¹´ë“œ: ${randomCard.name_ko}\\n`;
                            addTestResult('ëœë¤ ì¹´ë“œ ì„ íƒ', true);
                        }
                        
                        const majorCards = loader.getMajorArcana();
                        results += `ğŸ‘‘ ë©”ì´ì € ì•„ë¥´ì¹´ë‚˜: ${majorCards.length}ê°œ\\n`;
                        
                        const searchResults = loader.searchCards('ë°”ë³´');
                        results += `ğŸ” ê²€ìƒ‰ í…ŒìŠ¤íŠ¸: ${searchResults.length}ê°œ ê²°ê³¼\\n`;
                        
                        addTestResult('ë°±ì—… ì‹œìŠ¤í…œ ê¸°ëŠ¥', true);
                        
                    } else {
                        addTestResult('ë°±ì—… ë°ì´í„° ë¡œë“œ', false);
                    }
                    
                } else {
                    results += 'âŒ BackupDataLoader í´ë˜ìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤\\n';
                    addTestResult('BackupDataLoader í´ë˜ìŠ¤', false);
                }
                
                showResults('backup-results', results);
                
            } catch (error) {
                results += `âŒ ì˜¤ë¥˜ ë°œìƒ: ${error.message}\\n`;
                showResults('backup-results', results, true);
                addTestResult('ë°±ì—… ì‹œìŠ¤í…œ', false, error.message);
            }
        }

        function testBackupFallback() {
            let results = '=== Fallback ë©”ì»¤ë‹ˆì¦˜ í…ŒìŠ¤íŠ¸ ===\\n\\n';
            
            try {
                if (typeof backupLoader !== 'undefined') {
                    results += 'âœ… ì „ì—­ backupLoader ì¸ìŠ¤í„´ìŠ¤ í™•ì¸\\n';
                    addTestResult('ì „ì—­ ë°±ì—… ë¡œë”', true);
                    
                    if (typeof loadBackupData === 'function') {
                        const fallbackCards = loadBackupData();
                        results += `âœ… loadBackupData() í•¨ìˆ˜ ì‘ë™: ${fallbackCards.length}ê°œ ì¹´ë“œ\\n`;
                        addTestResult('Fallback í•¨ìˆ˜', true);
                    } else {
                        results += 'âŒ loadBackupData() í•¨ìˆ˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ\\n';
                        addTestResult('Fallback í•¨ìˆ˜', false);
                    }
                    
                } else {
                    results += 'âŒ ì „ì—­ backupLoaderë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤\\n';
                    addTestResult('ì „ì—­ ë°±ì—… ë¡œë”', false);
                }
                
                showResults('backup-results', results);
                
            } catch (error) {
                results += `âŒ ì˜¤ë¥˜ ë°œìƒ: ${error.message}\\n`;
                showResults('backup-results', results, true);
                addTestResult('Fallback í…ŒìŠ¤íŠ¸', false, error.message);
            }
        }

        // 4. ê°„ë‹¨ íƒ€ë¡œ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸
        function testSimpleTarot() {
            let results = '=== ê°„ë‹¨ íƒ€ë¡œ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ ===\\n\\n';
            
            try {
                if (typeof SimpleTarotSystem !== 'undefined') {
                    results += 'âœ… SimpleTarotSystem í´ë˜ìŠ¤ ë¡œë“œ ì„±ê³µ\\n';
                    addTestResult('SimpleTarotSystem í´ë˜ìŠ¤', true);
                    
                    const tarot = new SimpleTarotSystem();
                    results += `âœ… ì‹œìŠ¤í…œ ì´ˆê¸°í™”: ${tarot.cards.length}ê°œ ì¹´ë“œ\\n`;
                    addTestResult('SimpleTarot ì´ˆê¸°í™”', true);
                    
                    // ì›ì¹´ë“œ ë¦¬ë”© í…ŒìŠ¤íŠ¸
                    const oneCardReading = tarot.oneCardReading();
                    if (oneCardReading && oneCardReading.card) {
                        results += `\\nğŸ”® ì›ì¹´ë“œ ë¦¬ë”© í…ŒìŠ¤íŠ¸:\\n`;
                        results += `â“ ì§ˆë¬¸: ${oneCardReading.question}\\n`;
                        results += `ğŸ´ ì¹´ë“œ: ${oneCardReading.card.name_ko} (${oneCardReading.card.reversed ? 'ì—­ë°©í–¥' : 'ì •ë°©í–¥'})\\n`;
                        results += `ğŸ’¡ ì˜ë¯¸: ${oneCardReading.card.meaning}\\n`;
                        addTestResult('ì›ì¹´ë“œ ë¦¬ë”©', true);
                    } else {
                        results += 'âŒ ì›ì¹´ë“œ ë¦¬ë”© ì‹¤íŒ¨\\n';
                        addTestResult('ì›ì¹´ë“œ ë¦¬ë”©', false);
                    }
                    
                } else {
                    results += 'âŒ SimpleTarotSystem í´ë˜ìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤\\n';
                    addTestResult('SimpleTarotSystem í´ë˜ìŠ¤', false);
                }
                
                showResults('simple-results', results);
                
            } catch (error) {
                results += `âŒ ì˜¤ë¥˜ ë°œìƒ: ${error.message}\\n`;
                showResults('simple-results', results, true);
                addTestResult('ê°„ë‹¨ íƒ€ë¡œ ì‹œìŠ¤í…œ', false, error.message);
            }
        }

        function testThreeCardSpread() {
            let results = '=== ì“°ë¦¬ì¹´ë“œ ìŠ¤í”„ë ˆë“œ í…ŒìŠ¤íŠ¸ ===\\n\\n';
            
            try {
                if (typeof SimpleTarotSystem !== 'undefined') {
                    const tarot = new SimpleTarotSystem();
                    const threeCardSpread = tarot.threeCardSpread();
                    
                    if (threeCardSpread && threeCardSpread.length === 3) {
                        results += 'ğŸ”® ì“°ë¦¬ì¹´ë“œ ìŠ¤í”„ë ˆë“œ ì„±ê³µ:\\n\\n';
                        
                        threeCardSpread.forEach((card, index) => {
                            results += `${index + 1}. ${card.position}:\\n`;
                            results += `   ğŸ´ ${card.name_ko} (${card.reversed ? 'ì—­ë°©í–¥' : 'ì •ë°©í–¥'})\\n`;
                            results += `   ğŸ’¡ ${card.meaning}\\n\\n`;
                        });
                        
                        addTestResult('ì“°ë¦¬ì¹´ë“œ ìŠ¤í”„ë ˆë“œ', true);
                    } else {
                        results += 'âŒ ì“°ë¦¬ì¹´ë“œ ìŠ¤í”„ë ˆë“œ ì‹¤íŒ¨\\n';
                        addTestResult('ì“°ë¦¬ì¹´ë“œ ìŠ¤í”„ë ˆë“œ', false);
                    }
                    
                } else {
                    results += 'âŒ SimpleTarotSystemì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤\\n';
                    addTestResult('ì“°ë¦¬ì¹´ë“œ ìŠ¤í”„ë ˆë“œ', false);
                }
                
                showResults('simple-results', results);
                
            } catch (error) {
                results += `âŒ ì˜¤ë¥˜ ë°œìƒ: ${error.message}\\n`;
                showResults('simple-results', results, true);
                addTestResult('ì“°ë¦¬ì¹´ë“œ ìŠ¤í”„ë ˆë“œ', false, error.message);
            }
        }

        function testRandomFeatures() {
            let results = '=== ëœë¤ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ ===\\n\\n';
            
            try {
                if (typeof SimpleTarotSystem !== 'undefined') {
                    const tarot = new SimpleTarotSystem();
                    
                    // ëœë¤ ì§ˆë¬¸ í…ŒìŠ¤íŠ¸
                    results += 'ğŸ² ëœë¤ ì§ˆë¬¸ 5ê°œ:\\n';
                    for (let i = 0; i < 5; i++) {
                        const question = tarot.getRandomQuestion();
                        results += `${i + 1}. ${question}\\n`;
                    }
                    
                    results += `\\nğŸ“Š ì´ ì§ˆë¬¸ ìˆ˜: ${tarot.randomQuestions.length}ê°œ\\n`;
                    addTestResult('ëœë¤ ì§ˆë¬¸ ìƒì„±', true);
                    
                    // ëœë¤ ì¹´ë“œ í…ŒìŠ¤íŠ¸
                    const randomCard = tarot.drawRandomCard();
                    if (randomCard) {
                        results += `\\nğŸ´ ëœë¤ ì¹´ë“œ: ${randomCard.name_ko}\\n`;
                        addTestResult('ëœë¤ ì¹´ë“œ ì„ íƒ', true);
                    }
                    
                    // TarotUtils í…ŒìŠ¤íŠ¸
                    if (typeof TarotUtils !== 'undefined') {
                        const advice = TarotUtils.generateRandomAdvice();
                        results += `\\nğŸ’« ëœë¤ ì¡°ì–¸: ${advice}\\n`;
                        addTestResult('ëœë¤ ì¡°ì–¸', true);
                    }
                    
                } else {
                    results += 'âŒ SimpleTarotSystemì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤\\n';
                    addTestResult('ëœë¤ ê¸°ëŠ¥', false);
                }
                
                showResults('simple-results', results);
                
            } catch (error) {
                results += `âŒ ì˜¤ë¥˜ ë°œìƒ: ${error.message}\\n`;
                showResults('simple-results', results, true);
                addTestResult('ëœë¤ ê¸°ëŠ¥', false, error.message);
            }
        }

        // 5. UI ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸
        function testUIFunctions() {
            let results = '=== UI ê¸°ë³¸ í•¨ìˆ˜ í…ŒìŠ¤íŠ¸ ===\\n\\n';
            
            try {
                const uiFunctions = [
                    'showCardModal',
                    'closeModal', 
                    'showToast',
                    'showLoading',
                    'hideLoading'
                ];
                
                let foundFunctions = 0;
                
                uiFunctions.forEach(funcName => {
                    if (typeof window[funcName] === 'function') {
                        results += `âœ… ${funcName} í•¨ìˆ˜ ì‚¬ìš© ê°€ëŠ¥\\n`;
                        foundFunctions++;
                    } else {
                        results += `âŒ ${funcName} í•¨ìˆ˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ\\n`;
                    }
                });
                
                addTestResult('UI ê¸°ë³¸ í•¨ìˆ˜', foundFunctions === uiFunctions.length);
                
                // UIUtils í™•ì¸
                if (typeof UIUtils !== 'undefined') {
                    results += '\\nâœ… UIUtils ê°ì²´ ì‚¬ìš© ê°€ëŠ¥\\n';
                    
                    const utilMethods = ['isInViewport', 'slideDown', 'slideUp', 'copyToClipboard'];
                    let foundUtils = 0;
                    
                    utilMethods.forEach(method => {
                        if (typeof UIUtils[method] === 'function') {
                            results += `   âœ… ${method}\\n`;
                            foundUtils++;
                        } else {
                            results += `   âŒ ${method}\\n`;
                        }
                    });
                    
                    addTestResult('UIUtils ë©”ì„œë“œ', foundUtils === utilMethods.length);
                    
                } else {
                    results += '\\nâŒ UIUtils ê°ì²´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ\\n';
                    addTestResult('UIUtils ê°ì²´', false);
                }
                
                showResults('ui-results', results);
                
            } catch (error) {
                results += `âŒ ì˜¤ë¥˜ ë°œìƒ: ${error.message}\\n`;
                showResults('ui-results', results, true);
                addTestResult('UI ê¸°ë³¸ í•¨ìˆ˜', false, error.message);
            }
        }

        function testModalSystem() {
            let results = '=== ëª¨ë‹¬ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ ===\\n\\n';
            
            try {
                if (typeof FULL_TAROT_CARDS !== 'undefined' && FULL_TAROT_CARDS.length > 0) {
                    const sampleCard = FULL_TAROT_CARDS[0];
                    
                    // í…ŒìŠ¤íŠ¸ ëª¨ë‹¬ í‘œì‹œ
                    showTestModal(sampleCard);
                    
                    results += 'âœ… í…ŒìŠ¤íŠ¸ ëª¨ë‹¬ì´ í‘œì‹œë˜ì—ˆìŠµë‹ˆë‹¤\\n';
                    results += 'ëª¨ë‹¬ì´ í™”ë©´ì— ë‚˜íƒ€ë‚¬ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”\\n';
                    addTestResult('ëª¨ë‹¬ í‘œì‹œ', true);
                    
                    // ëª¨ë‹¬ í•¨ìˆ˜ í™•ì¸
                    if (typeof showCardModal === 'function') {
                        results += 'âœ… showCardModal í•¨ìˆ˜ ì‚¬ìš© ê°€ëŠ¥\\n';
                        addTestResult('showCardModal í•¨ìˆ˜', true);
                    } else {
                        results += 'âŒ showCardModal í•¨ìˆ˜ ì—†ìŒ\\n';
                        addTestResult('showCardModal í•¨ìˆ˜', false);
                    }
                    
                } else {
                    results += 'âŒ í…ŒìŠ¤íŠ¸í•  ì¹´ë“œ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤\\n';
                    addTestResult('ëª¨ë‹¬ ì‹œìŠ¤í…œ', false);
                }
                
                showResults('ui-results', results);
                
            } catch (error) {
                results += `âŒ ì˜¤ë¥˜ ë°œìƒ: ${error.message}\\n`;
                showResults('ui-results', results, true);
                addTestResult('ëª¨ë‹¬ ì‹œìŠ¤í…œ', false, error.message);
            }
        }

        function testNotifications() {
            let results = '=== ì•Œë¦¼ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ ===\\n\\n';
            
            try {
                if (typeof showToast === 'function') {
                    // ë‹¤ì–‘í•œ íƒ€ì…ì˜ í† ìŠ¤íŠ¸ ë©”ì‹œì§€ í…ŒìŠ¤íŠ¸
                    showToast('ì„±ê³µ ë©”ì‹œì§€ í…ŒìŠ¤íŠ¸! ğŸ‰', 'success', 2000);
                    
                    setTimeout(() => {
                        showToast('ì •ë³´ ë©”ì‹œì§€ í…ŒìŠ¤íŠ¸ ğŸ“‹', 'info', 2000);
                    }, 500);
                    
                    setTimeout(() => {
                        showToast('ê²½ê³  ë©”ì‹œì§€ í…ŒìŠ¤íŠ¸ âš ï¸', 'warning', 2000);
                    }, 1000);
                    
                    setTimeout(() => {
                        showToast('ì˜¤ë¥˜ ë©”ì‹œì§€ í…ŒìŠ¤íŠ¸ âŒ', 'error', 2000);
                    }, 1500);
                    
                    results += 'âœ… í† ìŠ¤íŠ¸ ì•Œë¦¼ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ë¨\\n';
                    results += '4ê°œì˜ ë‹¤ë¥¸ íƒ€ì… í† ìŠ¤íŠ¸ê°€ ìˆœì°¨ì ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤\\n';
                    addTestResult('í† ìŠ¤íŠ¸ ì•Œë¦¼', true);
                    
                } else {
                    results += 'âŒ showToast í•¨ìˆ˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤\\n';
                    addTestResult('í† ìŠ¤íŠ¸ ì•Œë¦¼', false);
                }
                
                // ë¡œë”© ìŠ¤í”¼ë„ˆ í…ŒìŠ¤íŠ¸
                if (typeof showLoading === 'function' && typeof hideLoading === 'function') {
                    const spinner = showLoading(document.body);
                    setTimeout(() => {
                        hideLoading(spinner);
                        results += '\\nâœ… ë¡œë”© ìŠ¤í”¼ë„ˆ í…ŒìŠ¤íŠ¸ ì™„ë£Œ\\n';
                        addTestResult('ë¡œë”© ìŠ¤í”¼ë„ˆ', true);
                        showResults('ui-results', results);
                    }, 2000);
                    
                    results += '\\nâœ… ë¡œë”© ìŠ¤í”¼ë„ˆ í‘œì‹œë¨ (2ì´ˆ í›„ ì‚¬ë¼ì§‘ë‹ˆë‹¤)\\n';
                } else {
                    results += '\\nâŒ ë¡œë”© ìŠ¤í”¼ë„ˆ í•¨ìˆ˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ\\n';
                    addTestResult('ë¡œë”© ìŠ¤í”¼ë„ˆ', false);
                }
                
                showResults('ui-results', results);
                
            } catch (error) {
                results += `âŒ ì˜¤ë¥˜ ë°œìƒ: ${error.message}\\n`;
                showResults('ui-results', results, true);
                addTestResult('ì•Œë¦¼ ì‹œìŠ¤í…œ', false, error.message);
            }
        }

        // í…ŒìŠ¤íŠ¸ ëª¨ë‹¬ í•¨ìˆ˜ë“¤
        function showTestModal(card) {
            const modal = document.getElementById('testModal');
            const title = document.getElementById('modalTitle');
            const text = document.getElementById('modalText');
            
            title.textContent = `${card.name_ko} (${card.name_en})`;
            text.textContent = `ì •ë°©í–¥: ${card.meaning_up}\\nì—­ë°©í–¥: ${card.meaning_rev}`;
            
            modal.style.display = 'flex';
        }

        function closeTestModal() {
            document.getElementById('testModal').style.display = 'none';
        }

        // 6. í†µí•© í…ŒìŠ¤íŠ¸
        function runFullIntegrationTest() {
            let results = '=== ì‹œìŠ¤í…œ í†µí•© í…ŒìŠ¤íŠ¸ ===\\n\\n';
            
            try {
                // ì „ì²´ ì›Œí¬í”Œë¡œ í…ŒìŠ¤íŠ¸
                results += 'ğŸ”„ ì „ì²´ ì‹œìŠ¤í…œ ì›Œí¬í”Œë¡œ í…ŒìŠ¤íŠ¸...\\n\\n';
                
                // 1. ë°ì´í„° ë¡œë”©
                if (typeof FULL_TAROT_CARDS !== 'undefined') {
                    results += 'âœ… 1ë‹¨ê³„: ê¸°ë³¸ ë°ì´í„° ë¡œë”© ì„±ê³µ\\n';
                    
                    // 2. ë”•ì…”ë„ˆë¦¬ ì‹œìŠ¤í…œ
                    if (typeof TarotDictionary !== 'undefined') {
                        const dict = new TarotDictionary();
                        dict.loadCards();
                        results += 'âœ… 2ë‹¨ê³„: ë”•ì…”ë„ˆë¦¬ ì‹œìŠ¤í…œ í™œì„±í™”\\n';
                        
                        // 3. ë°±ì—… ì‹œìŠ¤í…œ
                        if (typeof BackupDataLoader !== 'undefined') {
                            const backup = new BackupDataLoader();
                            backup.loadBackupData();
                            results += 'âœ… 3ë‹¨ê³„: ë°±ì—… ì‹œìŠ¤í…œ ì¤€ë¹„ ì™„ë£Œ\\n';
                            
                            // 4. ê°„ë‹¨ íƒ€ë¡œ ì‹œìŠ¤í…œ
                            if (typeof SimpleTarotSystem !== 'undefined') {
                                const simple = new SimpleTarotSystem();
                                const reading = simple.oneCardReading();
                                results += 'âœ… 4ë‹¨ê³„: ê°„ë‹¨ íƒ€ë¡œ ì‹œìŠ¤í…œ ì‘ë™\\n';
                                
                                // 5. UI ì‹œìŠ¤í…œ
                                if (typeof showToast === 'function') {
                                    results += 'âœ… 5ë‹¨ê³„: UI ì‹œìŠ¤í…œ ì¤€ë¹„ ì™„ë£Œ\\n';
                                    
                                    results += '\\nğŸ‰ ì „ì²´ ì‹œìŠ¤í…œ í†µí•© í…ŒìŠ¤íŠ¸ ì„±ê³µ!\\n';
                                    results += 'ëª¨ë“  ì»´í¬ë„ŒíŠ¸ê°€ ì •ìƒì ìœ¼ë¡œ ì—°ë™ë©ë‹ˆë‹¤.\\n';
                                    addTestResult('ì‹œìŠ¤í…œ í†µí•©', true);
                                    
                                } else {
                                    results += 'âŒ 5ë‹¨ê³„: UI ì‹œìŠ¤í…œ ì˜¤ë¥˜\\n';
                                    addTestResult('ì‹œìŠ¤í…œ í†µí•©', false);
                                }
                            } else {
                                results += 'âŒ 4ë‹¨ê³„: ê°„ë‹¨ íƒ€ë¡œ ì‹œìŠ¤í…œ ì˜¤ë¥˜\\n';
                                addTestResult('ì‹œìŠ¤í…œ í†µí•©', false);
                            }
                        } else {
                            results += 'âŒ 3ë‹¨ê³„: ë°±ì—… ì‹œìŠ¤í…œ ì˜¤ë¥˜\\n';
                            addTestResult('ì‹œìŠ¤í…œ í†µí•©', false);
                        }
                    } else {
                        results += 'âŒ 2ë‹¨ê³„: ë”•ì…”ë„ˆë¦¬ ì‹œìŠ¤í…œ ì˜¤ë¥˜\\n';
                        addTestResult('ì‹œìŠ¤í…œ í†µí•©', false);
                    }
                } else {
                    results += 'âŒ 1ë‹¨ê³„: ê¸°ë³¸ ë°ì´í„° ë¡œë”© ì‹¤íŒ¨\\n';
                    addTestResult('ì‹œìŠ¤í…œ í†µí•©', false);
                }
                
                showResults('integration-results', results);
                
            } catch (error) {
                results += `âŒ í†µí•© í…ŒìŠ¤íŠ¸ ì˜¤ë¥˜: ${error.message}\\n`;
                showResults('integration-results', results, true);
                addTestResult('ì‹œìŠ¤í…œ í†µí•©', false, error.message);
            }
        }

        function performanceTest() {
            let results = '=== ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ===\\n\\n';
            
            try {
                const startTime = performance.now();
                
                // ëŒ€ëŸ‰ ì¹´ë“œ ì²˜ë¦¬ í…ŒìŠ¤íŠ¸
                if (typeof TarotDictionary !== 'undefined' && typeof FULL_TAROT_CARDS !== 'undefined') {
                    const dict = new TarotDictionary();
                    
                    const loadStart = performance.now();
                    dict.loadCards();
                    const loadTime = performance.now() - loadStart;
                    
                    results += `â±ï¸ ì¹´ë“œ ë¡œë”© ì‹œê°„: ${loadTime.toFixed(2)}ms\\n`;
                    
                    // í•„í„°ë§ ì„±ëŠ¥
                    const filterStart = performance.now();
                    for (let i = 0; i < 100; i++) {
                        dict.filterCards('Major');
                        dict.filterCards('Minor');
                        dict.filterCards('all');
                    }
                    const filterTime = performance.now() - filterStart;
                    
                    results += `â±ï¸ í•„í„°ë§ 100íšŒ ì‹œê°„: ${filterTime.toFixed(2)}ms\\n`;
                    
                    // ê²€ìƒ‰ ì„±ëŠ¥
                    const searchStart = performance.now();
                    const searchTerms = ['ë°”ë³´', 'ë§ˆë²•ì‚¬', 'ì—¬í™©ì œ', 'fool', 'magician'];
                    for (let i = 0; i < 50; i++) {
                        searchTerms.forEach(term => {
                            dict.searchCards(term);
                        });
                    }
                    const searchTime = performance.now() - searchStart;
                    
                    results += `â±ï¸ ê²€ìƒ‰ 250íšŒ ì‹œê°„: ${searchTime.toFixed(2)}ms\\n`;
                    
                    const totalTime = performance.now() - startTime;
                    results += `\\nâ±ï¸ ì´ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ì‹œê°„: ${totalTime.toFixed(2)}ms\\n`;
                    
                    if (totalTime < 1000) {
                        results += 'âœ… ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ í†µê³¼ (1ì´ˆ ë¯¸ë§Œ)\\n';
                        addTestResult('ì„±ëŠ¥ í…ŒìŠ¤íŠ¸', true);
                    } else {
                        results += 'âš ï¸ ì„±ëŠ¥ ê°œì„  í•„ìš” (1ì´ˆ ì´ˆê³¼)\\n';
                        addTestResult('ì„±ëŠ¥ í…ŒìŠ¤íŠ¸', false);
                    }
                    
                } else {
                    results += 'âŒ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ì— í•„ìš”í•œ ì»´í¬ë„ŒíŠ¸ ì—†ìŒ\\n';
                    addTestResult('ì„±ëŠ¥ í…ŒìŠ¤íŠ¸', false);
                }
                
                showResults('integration-results', results);
                
            } catch (error) {
                results += `âŒ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ì˜¤ë¥˜: ${error.message}\\n`;
                showResults('integration-results', results, true);
                addTestResult('ì„±ëŠ¥ í…ŒìŠ¤íŠ¸', false, error.message);
            }
        }

        // ëª¨ë“  í…ŒìŠ¤íŠ¸ ì‹¤í–‰
        function runAllTests() {
            // í…ŒìŠ¤íŠ¸ ê²°ê³¼ ì´ˆê¸°í™”
            testResults = { total: 0, passed: 0, failed: 0, details: [] };
            
            showResults('integration-results', 'ğŸš€ ì „ì²´ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤...\\nì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.');
            
            // ìˆœì°¨ì ìœ¼ë¡œ ëª¨ë“  í…ŒìŠ¤íŠ¸ ì‹¤í–‰
            setTimeout(() => {
                testDataLoading();
                setTimeout(() => {
                    testTarotDictionary();
                    setTimeout(() => {
                        testBackupSystem();
                        setTimeout(() => {
                            testSimpleTarot();
                            setTimeout(() => {
                                testUIFunctions();
                                setTimeout(() => {
                                    runFullIntegrationTest();
                                    setTimeout(() => {
                                        performanceTest();
                                        
                                        // ìµœì¢… ê²°ê³¼ í‘œì‹œ
                                        let finalResults = '=== ğŸ ì „ì²´ í…ŒìŠ¤íŠ¸ ì™„ë£Œ ===\\n\\n';
                                        finalResults += `ğŸ“Š ì´ í…ŒìŠ¤íŠ¸: ${testResults.total}ê°œ\\n`;
                                        finalResults += `âœ… ì„±ê³µ: ${testResults.passed}ê°œ\\n`;
                                        finalResults += `âŒ ì‹¤íŒ¨: ${testResults.failed}ê°œ\\n`;
                                        finalResults += `ğŸ“ˆ ì„±ê³µë¥ : ${Math.round((testResults.passed / testResults.total) * 100)}%\\n\\n`;
                                        
                                        if (testResults.failed === 0) {
                                            finalResults += 'ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤! ëª¨ë“  í…ŒìŠ¤íŠ¸ê°€ ì„±ê³µí–ˆìŠµë‹ˆë‹¤!\\n';
                                            finalResults += 'íƒ€ë¡œ ì‹œìŠ¤í…œì´ ì™„ë²½í•˜ê²Œ ì‘ë™í•©ë‹ˆë‹¤.';
                                        } else {
                                            finalResults += 'âš ï¸ ì¼ë¶€ í…ŒìŠ¤íŠ¸ê°€ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\n';
                                            finalResults += 'ì‹¤íŒ¨í•œ í•­ëª©ë“¤ì„ í™•ì¸í•˜ê³  ìˆ˜ì •í•´ì£¼ì„¸ìš”.';
                                        }
                                        
                                        showResults('integration-results', finalResults);
                                        
                                    }, 500);
                                }, 500);
                            }, 500);
                        }, 500);
                    }, 500);
                }, 500);
            }, 100);
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        window.addEventListener('load', function() {
            console.log('ğŸ”® íƒ€ë¡œ ì‹œìŠ¤í…œ ì¢…í•© í…ŒìŠ¤íŠ¸ í˜ì´ì§€ê°€ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.');
            console.log('ì›í•˜ëŠ” í…ŒìŠ¤íŠ¸ ë²„íŠ¼ì„ í´ë¦­í•˜ê±°ë‚˜ "ëª¨ë“  í…ŒìŠ¤íŠ¸ ì‹¤í–‰"ì„ í´ë¦­í•˜ì„¸ìš”.');
            
            // ì´ˆê¸° ì§„í–‰ë¥  ì„¤ì •
            updateProgress();
        });
    </script>
</body>
</html>